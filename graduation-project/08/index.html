<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="5AUIVYTbHIAuz-eQtxSfZbWW5eg9_EVZMSQycIuXrG0">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"cishoon.top","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.20.0","exturl":true,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"default"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/config.min.js"></script>

    <meta name="description" content="æ ¹æ® https:&#x2F;&#x2F;docs.ignite.com&#x2F;guide&#x2F;getting-started ä¸­çš„æ•™ç¨‹ï¼Œå®ç°ä¸€ä¸ª Cosmos åŒºå—é“¾çš„æ­å»ºã€‚ ä½¿ç”¨ ignite æä¾›çš„è‡ªåŠ¨åŒ–æ„å»ºè„šæœ¬ï¼Œå®ç° Cosmos åŒºå—é“¾çš„æ­å»ºå’Œæ¨¡å—è®¾è®¡ã€‚ å†…å®¹ä¸å…¨é¢ï¼Œè¯¦ç»†çš„çœ‹é“¾æ¥ç½‘ç«™ã€‚ ä½†æ˜¯å› ä¸º ignite å°è£…å¤ªå¤šäº†ï¼Œæ²¡å®Œå…¨æ˜ç™½å¦‚ä½•ç»§æ‰¿æ¨¡å—ã€‚ æœ¬æ–‡ä¸ºæ‘¸ç´¢è¿‡ç¨‹ä¸­çš„è®°å½•ï¼Œä¸é€‚åˆå­¦ä¹ ã€‚è¯·çœ‹æ¯•è®¾10ï¼Œæ¯”è¾ƒé€‚åˆå‚è€ƒå­¦ä¹ ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="æ¯•è®¾08 - Cosmos æ„å»ºè‡ªå·±çš„åŒºå—é“¾">
<meta property="og:url" content="http://cishoon.top/graduation-project/08/index.html">
<meta property="og:site_name" content="Cishoon&#39;s Blog">
<meta property="og:description" content="æ ¹æ® https:&#x2F;&#x2F;docs.ignite.com&#x2F;guide&#x2F;getting-started ä¸­çš„æ•™ç¨‹ï¼Œå®ç°ä¸€ä¸ª Cosmos åŒºå—é“¾çš„æ­å»ºã€‚ ä½¿ç”¨ ignite æä¾›çš„è‡ªåŠ¨åŒ–æ„å»ºè„šæœ¬ï¼Œå®ç° Cosmos åŒºå—é“¾çš„æ­å»ºå’Œæ¨¡å—è®¾è®¡ã€‚ å†…å®¹ä¸å…¨é¢ï¼Œè¯¦ç»†çš„çœ‹é“¾æ¥ç½‘ç«™ã€‚ ä½†æ˜¯å› ä¸º ignite å°è£…å¤ªå¤šäº†ï¼Œæ²¡å®Œå…¨æ˜ç™½å¦‚ä½•ç»§æ‰¿æ¨¡å—ã€‚ æœ¬æ–‡ä¸ºæ‘¸ç´¢è¿‡ç¨‹ä¸­çš„è®°å½•ï¼Œä¸é€‚åˆå­¦ä¹ ã€‚è¯·çœ‹æ¯•è®¾10ï¼Œæ¯”è¾ƒé€‚åˆå‚è€ƒå­¦ä¹ ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-11-07T16:00:00.000Z">
<meta property="article:modified_time" content="2024-11-17T13:53:36.277Z">
<meta property="article:author" content="Cishoon">
<meta property="article:tag" content="åŒºå—é“¾">
<meta property="article:tag" content="æ¯•è®¾">
<meta property="article:tag" content="Cosmos">
<meta property="article:tag" content="Go">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://cishoon.top/graduation-project/08/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://cishoon.top/graduation-project/08/","path":"graduation-project/08/","title":"æ¯•è®¾08 - Cosmos æ„å»ºè‡ªå·±çš„åŒºå—é“¾"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>æ¯•è®¾08 - Cosmos æ„å»ºè‡ªå·±çš„åŒºå—é“¾ | Cishoon's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-43861RVV8R"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-43861RVV8R","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/third-party/analytics/google-analytics.min.js"></script>








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Cishoon's Blog" type="application/atom+xml">
<style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Cishoon's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">61</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾<span class="badge">41</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          ç›® å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E7%BD%AE%E5%87%86%E5%A4%87"><span class="nav-text">å‰ç½®å‡†å¤‡</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E5%8C%BA%E5%9D%97%E9%93%BE"><span class="nav-text">1 åˆ›å»ºä¸€ä¸ªæ–°çš„åŒºå—é“¾</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="nav-text">1.1 ç›®å½•ç»“æ„</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%AF%E7%94%A8%E9%A1%B9%E7%9B%AE"><span class="nav-text">2 å¯ç”¨é¡¹ç›®</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#hello-world"><span class="nav-text">3 Hello World!</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E9%93%BE"><span class="nav-text">3.1 åˆ›å»ºä¸€ä¸ªæ–°çš„é“¾</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E6%9F%A5%E8%AF%A2%E4%BB%A3%E7%A0%81"><span class="nav-text">3.2 ç”ŸæˆæŸ¥è¯¢ä»£ç </span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#proto"><span class="nav-text">3.2.1 proto</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cli"><span class="nav-text">3.2.2 cli</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#keeper"><span class="nav-text">3.2.3 keeper</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9F%A5%E8%AF%A2%E5%93%8D%E5%BA%94"><span class="nav-text">3.3 è‡ªå®šä¹‰æŸ¥è¯¢å“åº”</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E5%8C%BA%E5%9D%97%E9%93%BE%E5%B9%B6%E6%B5%8B%E8%AF%95"><span class="nav-text">3.4 å¯åŠ¨åŒºå—é“¾å¹¶æµ‹è¯•</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%9A%E5%AE%A2%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="nav-text">4 åšå®¢ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ignite-%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="nav-text">4.1 Ignite å‚æ•°ç±»å‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#codec.binarycodeccdc"><span class="nav-text">4.2 codec.BinaryCodecï¼ˆcdcï¼‰</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%99%84%E5%BD%95"><span class="nav-text">é™„å½•</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#proto-%E7%AE%80%E8%A6%81%E6%95%99%E7%A8%8B"><span class="nav-text">proto ç®€è¦æ•™ç¨‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95%E5%A3%B0%E6%98%8Esyntax-declaration"><span class="nav-text">1. è¯­æ³•å£°æ˜ï¼ˆSyntax
Declarationï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%85%E5%A3%B0%E6%98%8Epackage-declaration"><span class="nav-text">2. åŒ…å£°æ˜ï¼ˆPackage
Declarationï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5imports"><span class="nav-text">3. å¯¼å…¥ï¼ˆImportsï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B6%88%E6%81%AF%E5%AE%9A%E4%B9%89message-definition"><span class="nav-text">4. æ¶ˆæ¯å®šä¹‰ï¼ˆMessage
Definitionï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%AE%9A%E4%B9%89service-definition"><span class="nav-text">5. æœåŠ¡å®šä¹‰ï¼ˆService
Definitionï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8Benum-definition"><span class="nav-text">6. æšä¸¾ç±»å‹ï¼ˆEnum
Definitionï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B-.proto-%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="nav-text">ç¤ºä¾‹ .proto æ–‡ä»¶ç»“æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-text">æ€»ç»“</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#keeper-1"><span class="nav-text">Keeper</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#keeper-%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-text">1. Keeper ç»“æ„ä½“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="nav-text">2. æ„é€ å‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E9%80%BB%E8%BE%91"><span class="nav-text">3. æŸ¥è¯¢é€»è¾‘</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B6%88%E6%81%AF%E5%A4%84%E7%90%86%E9%80%BB%E8%BE%91"><span class="nav-text">4. æ¶ˆæ¯å¤„ç†é€»è¾‘</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="nav-text">5. çŠ¶æ€ç®¡ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E8%AE%B0%E5%BD%95"><span class="nav-text">6. äº‹ä»¶è®°å½•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-1"><span class="nav-text">æ€»ç»“</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Cishoon"
      src="/images/cishoon.jpg">
  <p class="site-author-name" itemprop="name">Cishoon</p>
  <div class="site-description" itemprop="description">ä¸€æ¡æ•°å­¦å…¬å¼ + ä¸€ä¸ªç®€å•çš„æ•…äº‹</div>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Npc2hvb24=" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;cishoon"><i class="fab fa-github fa-fw"></i></span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vMTA2Njk1NDg4" title="å“”å“©å“”å“© â†’ https:&#x2F;&#x2F;space.bilibili.com&#x2F;106695488"><i class="fa-brands fa-bilibili fa-fw"></i></span>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cishoon.top/graduation-project/08/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/cishoon.jpg">
      <meta itemprop="name" content="Cishoon">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cishoon's Blog">
      <meta itemprop="description" content="ä¸€æ¡æ•°å­¦å…¬å¼ + ä¸€ä¸ªç®€å•çš„æ•…äº‹">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="æ¯•è®¾08 - Cosmos æ„å»ºè‡ªå·±çš„åŒºå—é“¾ | Cishoon's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          æ¯•è®¾08 - Cosmos æ„å»ºè‡ªå·±çš„åŒºå—é“¾<span class="exturl post-edit-link" data-url="aHR0cHM6Ly9naXRodWIuY29tL0Npc2hvb24vYmxvZy90cmVlL21haW4vc291cmNlL19wb3N0cy9ncmFkdWF0aW9uLXByb2plY3QvMDgubWQ=" title="ç¼–è¾‘"><i class="fa fa-pen-nib"></i></span>
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2024-11-08 00:00:00" itemprop="dateCreated datePublished" datetime="2024-11-08T00:00:00+08:00">2024-11-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">ç¬”è®°</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>12k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>11 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>æ ¹æ® https://docs.ignite.com/guide/getting-started ä¸­çš„æ•™ç¨‹ï¼Œå®ç°ä¸€ä¸ª
Cosmos åŒºå—é“¾çš„æ­å»ºã€‚</p>
<p>ä½¿ç”¨ ignite æä¾›çš„è‡ªåŠ¨åŒ–æ„å»ºè„šæœ¬ï¼Œå®ç° Cosmos
åŒºå—é“¾çš„æ­å»ºå’Œæ¨¡å—è®¾è®¡ã€‚</p>
<p>å†…å®¹ä¸å…¨é¢ï¼Œè¯¦ç»†çš„çœ‹é“¾æ¥ç½‘ç«™ã€‚</p>
<p>ä½†æ˜¯å› ä¸º ignite å°è£…å¤ªå¤šäº†ï¼Œæ²¡å®Œå…¨æ˜ç™½å¦‚ä½•ç»§æ‰¿æ¨¡å—ã€‚</p>
<p>æœ¬æ–‡ä¸ºæ‘¸ç´¢è¿‡ç¨‹ä¸­çš„è®°å½•ï¼Œä¸é€‚åˆå­¦ä¹ ã€‚è¯·çœ‹æ¯•è®¾10ï¼Œæ¯”è¾ƒé€‚åˆå‚è€ƒå­¦ä¹ ã€‚</p>
<span id="more"></span>
<h1 id="å‰ç½®å‡†å¤‡">å‰ç½®å‡†å¤‡</h1>
<ul>
<li><p>å®‰è£… go (1.21+)</p>
<p>https://ubuntuhandbook.org/index.php/2024/02/how-to-install-go-golang-1-22-in-ubuntu-22-04/#google_vignette</p>
<p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget -c https://go.dev/dl/go1.23.1.linux-amd64.tar.gz</span><br><span class="line">tar -C /usr/local/ -xzf go1.23.1.linux-amd64.tar.gz</span><br></pre></td></tr></table></figure></p>
<p>åœ¨ <code>~/.bashrc</code> ä¸­æ·»åŠ ï¼š</p>
<p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -d <span class="string">"/usr/local/go/bin"</span> ] ; <span class="keyword">then</span></span><br><span class="line">    PATH=<span class="string">"/usr/local/go/bin:<span class="variable">$PATH</span>"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p>
<p>é‡æ–°è½½å…¥ <code>~/.bashrc</code>ï¼š</p>
<p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure></p>
<p>è®¾ç½®ä¸­å›½ä»£ç†ï¼š</p>
<p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">go env -w GO111MODULE=on</span><br><span class="line">go env -w GOPROXY=https://mirrors.aliyun.com/goproxy/,direct</span><br></pre></td></tr></table></figure></p></li>
<li><p>å®‰è£… Ignite CLI</p>
<p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo snap set system proxy.http="http://192.168.3.56:21882"</span><br><span class="line">sudo snap set system proxy.https="http://192.168.3.56:21882"</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo systemctl restart snapd</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">snap install ignite --classic</span><br></pre></td></tr></table></figure></p></li>
</ul>
<h1 id="åˆ›å»ºä¸€ä¸ªæ–°çš„åŒºå—é“¾">1 åˆ›å»ºä¸€ä¸ªæ–°çš„åŒºå—é“¾</h1>
<p>è¦ä½¿ç”¨ Ignite åˆ›å»ºä¸€ä¸ªæ–°çš„åŒºå—é“¾é¡¹ç›®ï¼Œéœ€è¦è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ignite scaffold chain example</span><br></pre></td></tr></table></figure>
<p>åœ¨å›½å†…ï¼Œå®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½ä¼šæœ‰å¾ˆå¤šæŠ¥é”™ï¼Œéƒ½æ˜¯ä»£ç†çš„é—®é¢˜ã€‚å®‰è£…æˆåŠŸä¹‹åè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@cishoon-virtual-machine:~/go]# ignite scaffold chain example</span><br><span class="line"></span><br><span class="line">â­ï¸ Successfully created a new blockchain 'example'.</span><br><span class="line">ğŸ‘‰ Get started with the following commands:</span><br><span class="line"></span><br><span class="line"> % cd example</span><br><span class="line"> % ignite chain serve</span><br><span class="line"></span><br><span class="line">Documentation: https://docs.ignite.com</span><br></pre></td></tr></table></figure>
<p>æ–°ç›®å½• example ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„åŸºäº Cosmos SDK
çš„åŒºå—é“¾ã€‚é»˜è®¤å¯¼å…¥äº†å¤šä¸ªæ ‡å‡†æ¨¡å—ï¼š</p>
<ul>
<li><strong>staking</strong>ï¼šç”¨äºå®ç° PoS å…±è¯†æœºåˆ¶ã€‚</li>
<li><strong>bank</strong>ï¼šç”¨äºå®ç°ä»£å¸çš„è½¬è´¦ã€‚</li>
<li><strong>gov</strong>ï¼šç”¨äºé“¾ä¸Šæ²»ç†ã€‚</li>
</ul>
<h2 id="ç›®å½•ç»“æ„">1.1 ç›®å½•ç»“æ„</h2>
<ul>
<li><strong>app/
ç›®å½•</strong>ï¼šåŒ…å«è¿æ¥åŒºå—é“¾å„éƒ¨åˆ†çš„æ–‡ä»¶ã€‚è¯¥ç›®å½•ä¸­æœ€é‡è¦çš„æ–‡ä»¶æ˜¯
<code>app.go</code>ï¼Œå®ƒåŒ…å«åŒºå—é“¾çš„ç±»å‹å®šä¹‰ä»¥åŠåˆ›å»ºå’Œåˆå§‹åŒ–åŒºå—é“¾çš„å‡½æ•°ã€‚æ­¤æ–‡ä»¶è´Ÿè´£å°†åŒºå—é“¾çš„å„ä¸ªç»„ä»¶è¿æ¥åœ¨ä¸€èµ·ï¼Œå¹¶å®šä¹‰å®ƒä»¬ä¹‹é—´çš„äº¤äº’æ–¹å¼ã€‚</li>
<li><strong>cmd/
ç›®å½•</strong>ï¼šåŒ…å«è´Ÿè´£å·²ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶çš„å‘½ä»¤è¡Œæ¥å£ï¼ˆCLIï¼‰çš„ä¸»ç¨‹åºåŒ…ã€‚æ­¤ç¨‹åºåŒ…å®šä¹‰äº†å¯ä»¥é€šè¿‡
CLI
è¿è¡Œçš„å‘½ä»¤ä»¥åŠå®ƒä»¬çš„æ‰§è¡Œæ–¹å¼ã€‚å®ƒæ˜¯åŒºå—é“¾é¡¹ç›®çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä¸ºå¼€å‘äººå‘˜å’Œç”¨æˆ·æä¾›äº†ä¸€ç§ä¸åŒºå—é“¾äº¤äº’çš„æ–¹å¼ï¼Œä¾‹å¦‚æŸ¥è¯¢åŒºå—é“¾çŠ¶æ€æˆ–å‘é€äº¤æ˜“ã€‚</li>
<li><strong>proto/ ç›®å½•</strong>ï¼šåŒ…å«åè®®ç¼“å†²åŒºï¼ˆprotocol
bufferï¼‰æ–‡ä»¶ï¼Œç”¨äºæè¿°åŒºå—é“¾çš„æ•°æ®ç»“æ„ã€‚åè®®ç¼“å†²åŒºæ˜¯ä¸€ç§è¯­è¨€å’Œå¹³å°æ— å…³çš„æœºåˆ¶ï¼Œç”¨äºåºåˆ—åŒ–ç»“æ„åŒ–æ•°æ®ï¼Œé€šå¸¸ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆå¦‚åŒºå—é“¾ç½‘ç»œï¼‰çš„å¼€å‘ã€‚<code>proto/</code>
ç›®å½•ä¸­çš„åè®®ç¼“å†²åŒºæ–‡ä»¶å®šä¹‰äº†åŒºå—é“¾ä½¿ç”¨çš„æ•°æ®ç»“æ„å’Œæ¶ˆæ¯ï¼Œå¹¶ç”¨äºç”Ÿæˆå¯ç”¨äºä¸åŒºå—é“¾äº¤äº’çš„å„ç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç ã€‚åœ¨
Cosmos SDK
ä¸­ï¼Œåè®®ç¼“å†²åŒºæ–‡ä»¶ç”¨äºå®šä¹‰å¯ä»¥è¢«åŒºå—é“¾å‘é€å’Œæ¥æ”¶çš„ç‰¹å®šæ•°æ®ç±»å‹ï¼Œä»¥åŠå¯ç”¨äºè®¿é—®åŒºå—é“¾åŠŸèƒ½çš„ç‰¹å®š
RPC ç«¯ç‚¹ã€‚</li>
<li><strong>testutil/
ç›®å½•</strong>ï¼šåŒ…å«ç”¨äºæµ‹è¯•çš„è¾…åŠ©å‡½æ•°ã€‚è¿™äº›å‡½æ•°æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥æ‰§è¡Œç¼–å†™åŒºå—é“¾æµ‹è¯•æ—¶æ‰€éœ€çš„å¸¸è§ä»»åŠ¡ï¼Œä¾‹å¦‚åˆ›å»ºæµ‹è¯•è´¦æˆ·ã€ç”Ÿæˆäº¤æ˜“ä»¥åŠæ£€æŸ¥åŒºå—é“¾çŠ¶æ€ã€‚ä½¿ç”¨
<code>testutil/</code>
ç›®å½•ä¸­çš„è¾…åŠ©å‡½æ•°ï¼Œå¼€å‘äººå‘˜å¯ä»¥æ›´å¿«é€Ÿã€é«˜æ•ˆåœ°ç¼–å†™æµ‹è¯•ï¼Œå¹¶ç¡®ä¿æµ‹è¯•å…¨é¢è€Œæœ‰æ•ˆã€‚</li>
<li><strong>x/ ç›®å½•</strong>ï¼šåŒ…å«æ·»åŠ åˆ°åŒºå—é“¾çš„è‡ªå®šä¹‰ Cosmos SDK
æ¨¡å—ã€‚æ ‡å‡†çš„ Cosmos SDK æ¨¡å—æ˜¯é¢„æ„å»ºçš„ç»„ä»¶ï¼Œæä¾›äº† Cosmos SDK
åŒºå—é“¾çš„å¸¸è§åŠŸèƒ½ï¼Œä¾‹å¦‚è´¨æŠ¼å’Œæ²»ç†æ”¯æŒã€‚å¦ä¸€æ–¹é¢ï¼Œè‡ªå®šä¹‰æ¨¡å—æ˜¯ä¸“é—¨ä¸ºåŒºå—é“¾é¡¹ç›®å¼€å‘çš„æ¨¡å—ï¼Œç”¨äºæä¾›ç‰¹å®šçš„é¡¹ç›®åŠŸèƒ½ã€‚</li>
<li><strong>config.yml
æ–‡ä»¶</strong>ï¼šæ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œç”¨äºåœ¨å¼€å‘è¿‡ç¨‹ä¸­è‡ªå®šä¹‰åŒºå—é“¾ã€‚è¯¥æ–‡ä»¶åŒ…å«æ§åˆ¶åŒºå—é“¾å„æ–¹é¢çš„è®¾ç½®ï¼Œä¾‹å¦‚ç½‘ç»œ
IDã€è´¦æˆ·ä½™é¢å’ŒèŠ‚ç‚¹å‚æ•°ç­‰ã€‚</li>
</ul>
<h1 id="å¯ç”¨é¡¹ç›®">2 å¯ç”¨é¡¹ç›®</h1>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯ç”¨åŒºå—é“¾ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ignite chain serve</span><br></pre></td></tr></table></figure>
<p><code>ignite chain serve</code>
å‘½ä»¤ç”¨äºåœ¨å¼€å‘æ¨¡å¼ä¸‹å¯åŠ¨åŒºå—é“¾èŠ‚ç‚¹ã€‚è¯¥å‘½ä»¤é¦–å…ˆä½¿ç”¨
<code>ignite chain build</code> ç¼–è¯‘å¹¶å®‰è£…äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨
<code>ignite chain init</code>
åˆå§‹åŒ–å•ä¸ªéªŒè¯äººçš„åŒºå—é“¾æ•°æ®ç›®å½•ã€‚ä¹‹åï¼Œå®ƒä¼šåœ¨æœ¬åœ°å¯åŠ¨èŠ‚ç‚¹ï¼Œå¹¶å¯ç”¨è‡ªåŠ¨ä»£ç é‡è½½åŠŸèƒ½ï¼Œä½¿ä»£ç çš„æ›´æ”¹å¯ä»¥ç›´æ¥åæ˜ åœ¨è¿è¡Œä¸­çš„åŒºå—é“¾ä¸Šï¼Œè€Œæ— éœ€é‡å¯èŠ‚ç‚¹ã€‚è¿™æ ·å¯ä»¥åŠ å¿«åŒºå—é“¾çš„å¼€å‘å’Œæµ‹è¯•è¿›ç¨‹ã€‚</p>
<h1 id="hello-world">3 Hello World!</h1>
<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œä½ å°†ä½¿ç”¨ Ignite CLI
æ„å»ºä¸€ä¸ªç®€å•çš„åŒºå—é“¾ï¼Œè¯¥åŒºå—é“¾å“åº”ä¸€ä¸ªè‡ªå®šä¹‰æŸ¥è¯¢å¹¶è¿”å› "Hello %s!"ï¼Œå…¶ä¸­
"%s" æ˜¯æŸ¥è¯¢ä¸­ä¼ å…¥çš„åå­—ã€‚é€šè¿‡æ­¤æ•™ç¨‹ï¼Œä½ å°†æ›´æ·±å…¥åœ°äº†è§£å¦‚ä½•åœ¨ Cosmos SDK
åŒºå—é“¾ä¸­<strong>åˆ›å»ºè‡ªå®šä¹‰æŸ¥è¯¢</strong>ã€‚</p>
<h2 id="åˆ›å»ºä¸€ä¸ªæ–°çš„é“¾">3.1 åˆ›å»ºä¸€ä¸ªæ–°çš„é“¾</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ignite scaffold chain hello</span><br><span class="line"><span class="built_in">cd</span> hello</span><br></pre></td></tr></table></figure>
<h2 id="ç”ŸæˆæŸ¥è¯¢ä»£ç ">3.2 ç”ŸæˆæŸ¥è¯¢ä»£ç </h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ignite scaffold query say-hello name --response name</span></span><br><span class="line"></span><br><span class="line">modify proto/hello/hello/query.proto</span><br><span class="line">create x/hello/keeper/query_say_hello.go</span><br><span class="line">modify x/hello/module/autocli.go</span><br><span class="line"></span><br><span class="line">ğŸ‰ Created a query `say-hello`.</span><br></pre></td></tr></table></figure>
<p>æ­¤å‘½ä»¤ä¼šä¸ºä¸€ä¸ªæ–°çš„æŸ¥è¯¢ <code>say-hello</code> ç”Ÿæˆä»£ç ï¼Œè¯¥æŸ¥è¯¢æ¥å—
<code>name</code> ä½œä¸ºè¾“å…¥ï¼Œå¹¶å°†å®ƒè¿”å›åœ¨å“åº”ä¸­ã€‚</p>
<p><strong>ç”Ÿæˆçš„ä»£ç </strong>ï¼š</p>
<ul>
<li><code>proto/hello/hello/query.proto</code>ï¼šå®šä¹‰è¯·æ±‚å’Œå“åº”ç»“æ„ã€‚</li>
<li><code>x/hello/module/autocli.go</code>ï¼šåŒ…å«æŸ¥è¯¢çš„ CLI å‘½ä»¤ã€‚</li>
<li><code>x/hello/keeper/query_say_hello.go</code>ï¼šå­˜æ”¾æŸ¥è¯¢å“åº”çš„é€»è¾‘ã€‚</li>
</ul>
<h3 id="proto">3.2.1 proto</h3>
<p>å¢åŠ äº†ä¸€ä¸ªæŸ¥è¯¢æ¥å£ï¼š</p>
<figure class="highlight protobuf"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Queries a list of SayHello items.</span></span><br><span class="line"><span class="function"><span class="keyword">rpc</span> SayHello (QuerySayHelloRequest) <span class="keyword">returns</span> (QuerySayHelloResponse) </span>{</span><br><span class="line">	<span class="keyword">option</span> (google.api.http).get = <span class="string">"/hello/hello/say_hello/{name}"</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">message </span><span class="title class_">QuerySayHelloRequest</span> {</span><br><span class="line">  <span class="type">string</span> name = <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">message </span><span class="title class_">QuerySayHelloResponse</span> {</span><br><span class="line">  <span class="type">string</span> name = <span class="number">1</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="cli">3.2.2 cli</h3>
<p>æ–°å¢äº†ä¸€ä¸ªè¯·æ±‚æ¥å£ï¼Œä½†æ˜¯æ²¡æœ‰åŒ…æ‹¬å…·ä½“å®ç°ä»£ç ï¼Œåº”è¯¥æ˜¯å°è£…è¿› Cosmos SDK
ä¸­çš„ autocliv1 äº†ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">Query: &amp;autocliv1.ServiceCommandDescriptor{</span><br><span class="line">    Service: modulev1.Query_ServiceDesc.ServiceName,</span><br><span class="line">    RpcCommandOptions: []*autocliv1.RpcCommandOptions{</span><br><span class="line">        {</span><br><span class="line">            RpcMethod: <span class="string">"Params"</span>,</span><br><span class="line">            Use:       <span class="string">"params"</span>,</span><br><span class="line">            Short:     <span class="string">"Shows the parameters of the module"</span>,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">            RpcMethod:      <span class="string">"SayHello"</span>,</span><br><span class="line">            Use:            <span class="string">"say-hello [name]"</span>,</span><br><span class="line">            Short:          <span class="string">"Query say-hello"</span>,</span><br><span class="line">            PositionalArgs: []*autocliv1.PositionalArgDescriptor{{ProtoField: <span class="string">"name"</span>}},</span><br><span class="line">        },</span><br><span class="line"></span><br><span class="line">        <span class="comment">// this line is used by ignite scaffolding # autocli/query</span></span><br><span class="line">    },</span><br><span class="line">},</span><br></pre></td></tr></table></figure>
<h3 id="keeper">3.2.3 keeper</h3>
<p>æ–°å¢äº† <code>query_say_hello.go</code> æ–‡ä»¶ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> keeper</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"context"</span></span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line">    <span class="string">"hello/x/hello/types"</span></span><br><span class="line"></span><br><span class="line">    sdk <span class="string">"github.com/cosmos/cosmos-sdk/types"</span></span><br><span class="line">    <span class="string">"google.golang.org/grpc/codes"</span></span><br><span class="line">    <span class="string">"google.golang.org/grpc/status"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(q queryServer)</span></span> SayHello(ctx context.Context, req *types.QuerySayHelloRequest) (*types.QuerySayHelloResponse, <span class="type">error</span>) {</span><br><span class="line">    <span class="keyword">if</span> req == <span class="literal">nil</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span>, status.Error(codes.InvalidArgument, <span class="string">"invalid request"</span>)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éªŒè¯å’Œä¸Šä¸‹æ–‡è§£åŒ…</span></span><br><span class="line">    ctx := sdk.UnwrapSDKContext(ctx)</span><br><span class="line"></span><br><span class="line">    _ = ctx</span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰å“åº”</span></span><br><span class="line">    <span class="keyword">return</span> &amp;types.QuerySayHelloResponse{Name: fmt.Sprintf(<span class="string">"Hello %s!"</span>, req.Name)}, <span class="literal">nil</span></span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="è‡ªå®šä¹‰æŸ¥è¯¢å“åº”">3.3 è‡ªå®šä¹‰æŸ¥è¯¢å“åº”</h2>
<p>ä¿®æ”¹ <code>query_say_hello.go</code>ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(k Keeper)</span></span> SayHello(goCtx context.Context, req *types.QuerySayHelloRequest) (*types.QuerySayHelloResponse, <span class="type">error</span>) {</span><br><span class="line">	<span class="keyword">if</span> req == <span class="literal">nil</span> {</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>, status.Error(codes.InvalidArgument, <span class="string">"invalid request"</span>)</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	ctx := sdk.UnwrapSDKContext(goCtx)</span><br><span class="line"></span><br><span class="line">	_ = ctx</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &amp;types.QuerySayHelloResponse{Name: fmt.Sprintf(<span class="string">"Hello %s!"</span>, req.Name)}, <span class="literal">nil</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="å¯åŠ¨åŒºå—é“¾å¹¶æµ‹è¯•">3.4 å¯åŠ¨åŒºå—é“¾å¹¶æµ‹è¯•</h2>
<p><strong>å¯åŠ¨åŒºå—é“¾</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ignite chain serve</span></span><br><span class="line"></span><br><span class="line">  Blockchain is running</span><br><span class="line"></span><br><span class="line">  Blockchain is running</span><br><span class="line"></span><br><span class="line">  Blockchain is running</span><br><span class="line">  </span><br><span class="line">  âœ” Added account alice with address cosmos1h2tqat8zme35fmkvk7yhp6r7r54edkg8eg0x43 and mnemonic:</span><br><span class="line">  coffee coffee female clap cake kind pledge lamp give lens accuse reopen captain poverty program reward music trust transfer ski heavy husband </span><br><span class="line">  </span><br><span class="line">  âœ” Added account bob with address cosmos1g7eamf74zkg629sd8wc0hdj88sqas8pfgrga7l and mnemonic:</span><br><span class="line">  deputy fix marble merge toy rice traffic <span class="built_in">wait</span> wife arrive laptop injury twelve doll shrimp guilt issue ripple position cereal width consider s</span><br><span class="line">  </span><br><span class="line">  ğŸŒ Tendermint node: http://0.0.0.0:26657</span><br><span class="line">  ğŸŒ Blockchain API: http://0.0.0.0:1317</span><br><span class="line">  ğŸŒ Token faucet: http://0.0.0.0:4500</span><br><span class="line">  </span><br><span class="line">  â‹† Data directory: /root/.hello</span><br><span class="line">  â‹† App binary: /root/go/bin/hellod</span><br><span class="line">  </span><br><span class="line">  Press the <span class="string">'q'</span> key to stop serve</span><br></pre></td></tr></table></figure>
<p><strong>è¿è¡Œæµ‹è¯•</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># cd /root/go/bin/hellod</span></span><br><span class="line"><span class="comment"># ./hellod q hello say-hello world</span></span><br><span class="line">name: Hello world!</span><br></pre></td></tr></table></figure>
<h1 id="åšå®¢å¢åˆ æ”¹æŸ¥">4 åšå®¢ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</h1>
<p>https://docs.ignite.com/guide/blog</p>
<p>ä¸ç»†å†™äº†ï¼Œç›´æ¥çœ‹åŸæ–‡å§ï¼Œåº•ä¸‹è®°å½•ä¸€ç‚¹å…³é”®ä»£ç ã€‚</p>
<h2 id="ignite-å‚æ•°ç±»å‹">4.1 Ignite å‚æ•°ç±»å‹</h2>
<blockquote>
<p>Ignite CLI æ”¯æŒåœ¨ Cosmos SDK
åŒºå—é“¾ä¸­å®šä¹‰å¤šç§æ•°æ®ç±»å‹ï¼Œä»¥ä¸‹æ˜¯å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼š</p>
<p><strong>åŸºæœ¬æ•°æ®ç±»å‹</strong></p>
<ul>
<li><strong><code>string</code></strong>ï¼šå­—ç¬¦ä¸²ç±»å‹ï¼Œç”¨äºå­˜å‚¨æ–‡æœ¬ã€‚</li>
<li><strong><code>bool</code></strong>ï¼šå¸ƒå°”ç±»å‹ï¼Œå€¼ä¸º <code>true</code>
æˆ– <code>false</code>ã€‚</li>
<li><strong><code>int</code></strong>ï¼šæœ‰ç¬¦å·æ•´æ•°ç±»å‹ï¼Œç”¨äºå­˜å‚¨æ•´æ•°å€¼ã€‚</li>
<li><strong><code>uint</code></strong>ï¼šæ— ç¬¦å·æ•´æ•°ç±»å‹ï¼Œåªèƒ½å­˜å‚¨éè´Ÿæ•´æ•°ã€‚</li>
<li><strong><code>int64</code> / <code>uint64</code></strong>ï¼š64
ä½çš„æœ‰ç¬¦å·å’Œæ— ç¬¦å·æ•´æ•°ï¼Œé€‚åˆå­˜å‚¨è¾ƒå¤§çš„æ•´æ•°å€¼ã€‚</li>
</ul>
<p><strong>æ•°å€¼ç±»å‹</strong></p>
<ul>
<li><strong><code>float</code></strong>ï¼šæµ®ç‚¹æ•°ç±»å‹ï¼Œç”¨äºå­˜å‚¨å°æ•°ã€‚</li>
<li><strong><code>float32</code> / <code>float64</code></strong>ï¼š32
ä½å’Œ 64 ä½æµ®ç‚¹æ•°ç±»å‹ï¼Œåˆ†åˆ«æä¾›ä¸åŒçš„ç²¾åº¦ã€‚</li>
</ul>
<p><strong>æ•°ç»„å’Œåˆ—è¡¨ç±»å‹</strong></p>
<ul>
<li><strong><code>[]&lt;type&gt;</code></strong>ï¼šæ³›å‹æ•°ç»„ç±»å‹ï¼Œç”¨äºå­˜å‚¨æŒ‡å®šç±»å‹çš„å¤šä¸ªå€¼ã€‚ä¾‹å¦‚ï¼Œ<code>[]string</code>
è¡¨ç¤ºå­—ç¬¦ä¸²æ•°ç»„ï¼Œ<code>[]uint64</code> è¡¨ç¤ºæ— ç¬¦å·æ•´æ•°æ•°ç»„ã€‚</li>
</ul>
<p><strong>ç‰¹æ®Šç±»å‹</strong></p>
<ul>
<li><strong><code>sdk.Coin</code></strong>ï¼šç”¨äºè¡¨ç¤º Cosmos SDK
ä¸­çš„ä»£å¸ï¼ˆcoinï¼‰ç±»å‹ã€‚ä»£å¸åŒ…å«æ•°é‡å’Œå•ä½ï¼ˆä¾‹å¦‚
<code>100atom</code>ï¼‰ï¼Œç”¨äºè¡¨ç¤ºç‰¹å®šæ•°é‡çš„åŸç”Ÿä»£å¸ã€‚</li>
<li><strong><code>sdk.Coins</code></strong>ï¼šè¡¨ç¤ºå¤šä¸ªä»£å¸ï¼Œç”¨äºå¤„ç†ä¸åŒç±»å‹çš„èµ„äº§ç»„åˆã€‚</li>
</ul>
<p><strong>è‡ªå®šä¹‰ç±»å‹</strong></p>
<ul>
<li><strong>æšä¸¾ç±»å‹ï¼ˆenumsï¼‰</strong>ï¼šé€šè¿‡å®šä¹‰ç‰¹å®šçš„å­—ç¬¦ä¸²æˆ–æ•´æ•°å€¼é›†åˆï¼Œç”¨äºè¡¨ç¤ºå…·æœ‰æœ‰é™å¯èƒ½å€¼çš„æ•°æ®ã€‚</li>
<li><strong>æ—¶é—´ç±»å‹ï¼ˆ<code>time.Time</code>ï¼‰</strong>ï¼šç”¨äºå­˜å‚¨æ—¥æœŸå’Œæ—¶é—´ï¼Œé€šå¸¸åœ¨
Cosmos SDK é¡¹ç›®ä¸­ç”¨äºå¤„ç†åŒºå—æ—¶é—´æˆ³æˆ–äº‹ä»¶æ—¶é—´ã€‚</li>
</ul>
<p><strong>å¤æ‚ç»“æ„ç±»å‹</strong></p>
<ul>
<li><strong>ç»“æ„ä½“ï¼ˆstructsï¼‰</strong>ï¼šå¯ä»¥å®šä¹‰å¤æ‚çš„æ•°æ®ç»“æ„ï¼ŒåŒ…å«å¤šä¸ªå­—æ®µï¼Œé€‚ç”¨äºå…·æœ‰å¤šä¸ªå±æ€§çš„æ•°æ®ç±»å‹ã€‚</li>
</ul>
<p>è¿™äº›æ•°æ®ç±»å‹æä¾›äº†çµæ´»çš„æ•°æ®å»ºæ¨¡èƒ½åŠ›ï¼Œæ”¯æŒå¼€å‘è€…æ ¹æ®éœ€è¦å®šä¹‰åŒºå—é“¾çš„å­˜å‚¨å’Œå¤„ç†éœ€æ±‚ã€‚Ignite
CLI ä¼šæ ¹æ®æŒ‡å®šçš„æ•°æ®ç±»å‹è‡ªåŠ¨ç”Ÿæˆç›¸å…³çš„ä»£ç ã€æŸ¥è¯¢å’Œæ¥å£ã€‚</p>
</blockquote>
<h2 id="codec.binarycodeccdc">4.2 codec.BinaryCodecï¼ˆcdcï¼‰</h2>
<p><code>codec.BinaryCodec</code> æ˜¯ Cosmos SDK
ä¸­ç”¨äºæ•°æ®ç¼–ç å’Œè§£ç çš„æ¥å£ã€‚è¯¥æ¥å£åŒ…å«ä¸€ç³»åˆ—å¸¸ç”¨çš„å‡½æ•°ï¼Œç”¨äºåºåˆ—åŒ–ï¼ˆç¼–ç ï¼‰å’Œååºåˆ—åŒ–ï¼ˆè§£ç ï¼‰æ•°æ®ç»“æ„ï¼Œä»¥ä¾¿è¿›è¡Œå­˜å‚¨ã€ä¼ è¾“æˆ–æ¨¡å—é—´çš„æ•°æ®äº¤æ¢ã€‚ä»¥ä¸‹æ˜¯
<code>BinaryCodec</code> æ¥å£ä¸­å¸¸ç”¨çš„å‡½æ•°åŠå…¶ä½œç”¨ï¼š</p>
<ol type="1">
<li><p><strong>MarshalBinaryBare</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">MarshalBinaryBare(o <span class="keyword">interface</span>{}) ([]<span class="type">byte</span>, <span class="type">error</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå°†æ•°æ®ç»“æ„ <code>o</code>
ç¼–ç ä¸ºäºŒè¿›åˆ¶æ ¼å¼ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå½“éœ€è¦å°†ç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚æ¶ˆæ¯ã€çŠ¶æ€ï¼‰å­˜å‚¨åˆ°æ•°æ®åº“æˆ–è¿›è¡Œç½‘ç»œä¼ è¾“æ—¶ï¼Œå¯ä»¥è°ƒç”¨è¯¥å‡½æ•°è¿›è¡Œåºåˆ—åŒ–ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼š<code>MarshalBinaryBare</code>
é€šå¸¸ç”¨äºå†…éƒ¨å­˜å‚¨ï¼Œå› ä¸ºå®ƒä¸åŒ…å«é™„åŠ å…ƒæ•°æ®ï¼ˆä¾‹å¦‚å­—æ®µçš„ç±»å‹ä¿¡æ¯ï¼‰ï¼Œç¼–ç æ•ˆç‡è¾ƒé«˜ã€‚</li>
</ul></li>
<li><p><strong>UnmarshalBinaryBare</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">UnmarshalBinaryBare(bz []<span class="type">byte</span>, ptr <span class="keyword">interface</span>{}) <span class="type">error</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå°†äºŒè¿›åˆ¶æ•°æ® <code>bz</code>
è§£ç ä¸ºç»“æ„åŒ–æ•°æ®ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨æŒ‡é’ˆ <code>ptr</code>
æŒ‡å‘çš„å˜é‡ä¸­ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå½“ä»æ•°æ®åº“æˆ–ç½‘ç»œä¸­è·å–åˆ°äºŒè¿›åˆ¶æ•°æ®å¹¶éœ€è¦è¿˜åŸä¸ºåŸå§‹ç»“æ„æ—¶ä½¿ç”¨è¯¥å‡½æ•°ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šè¯¥å‡½æ•°å¿…é¡»çŸ¥é“æ•°æ®çš„å…·ä½“ç±»å‹ï¼Œé€šå¸¸åœ¨è§£ç å‰å·²ç»çŸ¥é“æ•°æ®ç»“æ„çš„ç±»å‹ã€‚</li>
</ul></li>
<li><p><strong>MarshalBinaryLengthPrefixed</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">MarshalBinaryLengthPrefixed(o <span class="keyword">interface</span>{}) ([]<span class="type">byte</span>, <span class="type">error</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå°†æ•°æ®ç»“æ„ <code>o</code>
ç¼–ç ä¸ºå¸¦æœ‰é•¿åº¦å‰ç¼€çš„äºŒè¿›åˆ¶æ ¼å¼ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå¸¦é•¿åº¦å‰ç¼€çš„äºŒè¿›åˆ¶æ ¼å¼åœ¨ä¼ è¾“æ—¶å¯ä»¥æ˜ç¡®è¡¨ç¤ºæ•°æ®çš„è¾¹ç•Œï¼Œå¸¸ç”¨äºç½‘ç»œé€šä¿¡å’Œæ—¥å¿—è®°å½•ã€‚</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šé•¿åº¦å‰ç¼€æä¾›äº†æ›´å¥½çš„æ•°æ®åŒ…åˆ†å‰²ç®¡ç†ï¼Œå¯ç”¨äºé˜²æ­¢æ•°æ®è¢«æˆªæ–­æˆ–ç ´åã€‚</li>
</ul></li>
<li><p><strong>UnmarshalBinaryLengthPrefixed</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">UnmarshalBinaryLengthPrefixed(bz []<span class="type">byte</span>, ptr <span class="keyword">interface</span>{}) <span class="type">error</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå°†å¸¦æœ‰é•¿åº¦å‰ç¼€çš„äºŒè¿›åˆ¶æ•°æ® <code>bz</code>
è§£ç ä¸ºç»“æ„åŒ–æ•°æ®ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨æŒ‡é’ˆ <code>ptr</code>
æŒ‡å‘çš„å˜é‡ä¸­ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šä»ç½‘ç»œæµæˆ–æ–‡ä»¶ä¸­è¯»å–å¸¦æœ‰é•¿åº¦å‰ç¼€çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œå¹¶è¿˜åŸä¸ºç»“æ„åŒ–æ•°æ®æ—¶ä½¿ç”¨ã€‚</li>
</ul></li>
<li><p><strong>MarshalJSON</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">MarshalJSON(o <span class="keyword">interface</span>{}) ([]<span class="type">byte</span>, <span class="type">error</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå°†æ•°æ®ç»“æ„ <code>o</code> ç¼–ç ä¸º JSON
æ ¼å¼çš„å­—èŠ‚åˆ‡ç‰‡ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå½“éœ€è¦å°†æ•°æ®ä»¥ JSON
æ ¼å¼ä¸å¤–éƒ¨ç³»ç»Ÿæˆ–å‰ç«¯äº¤äº’æ—¶ä½¿ç”¨ï¼Œä¾¿äºäººç±»é˜…è¯»å’Œè°ƒè¯•ã€‚</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šJSON
æ˜¯ä¸€ç§é€šç”¨æ ¼å¼ï¼Œæ˜“äºè°ƒè¯•ï¼Œé€‚ç”¨äºå¯¹å¤–æä¾›çš„ API æ¥å£ã€‚</li>
</ul></li>
<li><p><strong>UnmarshalJSON</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">UnmarshalJSON(bz []<span class="type">byte</span>, ptr <span class="keyword">interface</span>{}) <span class="type">error</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå°† JSON æ ¼å¼çš„å­—èŠ‚åˆ‡ç‰‡ <code>bz</code>
è§£ç ä¸ºç»“æ„åŒ–æ•°æ®ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨æŒ‡é’ˆ <code>ptr</code>
æŒ‡å‘çš„å˜é‡ä¸­ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šä»å¤–éƒ¨ç³»ç»Ÿæˆ–ç”¨æˆ·æ¥å£æ¥æ”¶åˆ° JSON
æ•°æ®å¹¶éœ€è¦è§£æä¸ºç»“æ„åŒ–æ•°æ®æ—¶ä½¿ç”¨ã€‚</li>
</ul></li>
<li><p><strong>MustMarshalBinaryBare</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">MustMarshalBinaryBare(o <span class="keyword">interface</span>{}) []<span class="type">byte</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå°†æ•°æ®ç»“æ„ <code>o</code>
ç¼–ç ä¸ºäºŒè¿›åˆ¶æ ¼å¼ï¼Œä¸ <code>MarshalBinaryBare</code>
ç±»ä¼¼ï¼Œä½†è‹¥ç¼–ç å‡ºé”™åˆ™ç›´æ¥è§¦å‘ <code>panic</code>ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šåœ¨å¯¹ç¼–ç é”™è¯¯å®¹å¿åº¦è¾ƒä½çš„åœºæ™¯ä¸­ä½¿ç”¨ï¼Œå¦‚ç¼–ç é”™è¯¯å‡ ä¹ä¸å¯èƒ½å‘ç”Ÿæ—¶ä½¿ç”¨ï¼Œç®€åŒ–ä»£ç ç»“æ„ã€‚</li>
</ul></li>
<li><p><strong>MustUnmarshalBinaryBare</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">MustUnmarshalBinaryBare(bz []<span class="type">byte</span>, ptr <span class="keyword">interface</span>{})</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå°†äºŒè¿›åˆ¶æ•°æ® <code>bz</code>
è§£ç ä¸ºç»“æ„åŒ–æ•°æ®ï¼Œä¸ <code>UnmarshalBinaryBare</code>
ç±»ä¼¼ï¼Œä½†è‹¥è§£ç å‡ºé”™åˆ™ç›´æ¥è§¦å‘ <code>panic</code>ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šåœ¨ç¡®å®šæ•°æ®ä¸ä¼šå‡ºé”™çš„æƒ…å†µä¸‹ç®€åŒ–ä»£ç ï¼Œå‡å°‘é”™è¯¯å¤„ç†ä»£ç çš„å†™æ³•ã€‚</li>
</ul></li>
<li><p><strong>MustMarshalJSON</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">MustMarshalJSON(o <span class="keyword">interface</span>{}) []<span class="type">byte</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå°†æ•°æ®ç»“æ„ <code>o</code> ç¼–ç ä¸º JSON
æ ¼å¼ï¼Œè‹¥ç¼–ç å‡ºé”™åˆ™ç›´æ¥è§¦å‘ <code>panic</code>ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šåœ¨é«˜ç½®ä¿¡åº¦åœºæ™¯ä¸­å¿«é€Ÿç¼–ç  JSON
æ•°æ®ï¼Œè€Œæ— éœ€å¤„ç†ç¼–ç é”™è¯¯ã€‚</li>
</ul></li>
<li><p><strong>MustUnmarshalJSON</strong></p></li>
</ol>
<p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">MustUnmarshalJSON(bz []<span class="type">byte</span>, ptr <span class="keyword">interface</span>{})</span><br></pre></td></tr></table></figure> - <strong>ä½œç”¨</strong>ï¼šå°† JSON å­—èŠ‚åˆ‡ç‰‡
<code>bz</code> è§£ç ä¸ºç»“æ„åŒ–æ•°æ®ï¼Œè‹¥è§£ç å‡ºé”™åˆ™ç›´æ¥è§¦å‘
<code>panic</code>ã€‚ - <strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šåœ¨ç¡®å®š JSON
æ•°æ®æ ¼å¼æ­£ç¡®çš„åœºæ™¯ä¸‹ï¼Œå‡å°‘é”™è¯¯å¤„ç†é€»è¾‘ã€‚</p>
<p><code>codec.BinaryCodec</code>
æä¾›äº†ä¸€å¥—å®Œæ•´çš„æ•°æ®åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ–¹æ³•ï¼Œé€‚ç”¨äºäºŒè¿›åˆ¶ã€JSON
ç­‰ä¸åŒç¼–ç æ ¼å¼ã€‚å¸¸ç”¨çš„å‡½æ•°åŒ…æ‹¬å¸¦æœ‰æˆ–ä¸å¸¦é•¿åº¦å‰ç¼€çš„äºŒè¿›åˆ¶ç¼–ç å’Œè§£ç ã€JSON
ç¼–ç å’Œè§£ç ï¼Œä»¥åŠæ”¯æŒ <code>panic</code>
çš„ç¼–ç /è§£ç ç‰ˆæœ¬ã€‚é€‰æ‹©å…·ä½“å‡½æ•°æ—¶ï¼Œå¯ä»¥æ ¹æ®æ•°æ®æ ¼å¼è¦æ±‚ã€é”™è¯¯å¤„ç†éœ€æ±‚å’Œåº”ç”¨åœºæ™¯æ¥ä½¿ç”¨è¿™äº›ç¼–ç å’Œè§£ç å‡½æ•°ã€‚</p>
<p>ç›´æ¥ä½¿ç”¨ <code>MustMarshal</code> (ä¸åŠ åç¼€æŒ‡å®šç±»å‹)
ä¼šæ ¹æ®å…·ä½“å®ç°è‡ªåŠ¨é€‰æ‹©äºŒè¿›åˆ¶ç¼–ç æˆ– JSON ç¼–ç ï¼Œå¼€å‘è€…æ— éœ€æ˜¾å¼æŒ‡å®šã€‚</p>
<h1 id="é™„å½•">é™„å½•</h1>
<h2 id="proto-ç®€è¦æ•™ç¨‹">proto ç®€è¦æ•™ç¨‹</h2>
<p>ä¸€ä¸ª <code>.proto</code> æ–‡ä»¶ç”¨äºå®šä¹‰åè®®ç¼“å†²åŒºï¼ˆProtocol
Buffersï¼‰çš„æ¶ˆæ¯å’ŒæœåŠ¡ç»“æ„ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å‡ éƒ¨åˆ†ï¼š</p>
<h3 id="è¯­æ³•å£°æ˜syntax-declaration">1. <strong>è¯­æ³•å£°æ˜ï¼ˆSyntax
Declarationï¼‰</strong></h3>
<p><figure class="highlight proto"><table><tr><td class="code"><pre><span class="line">syntax = <span class="string">"proto3"</span>;</span><br></pre></td></tr></table></figure> - è¿™è¡Œä»£ç æŒ‡å®šä½¿ç”¨ <code>proto3</code>
è¯­æ³•ç‰ˆæœ¬ã€‚<code>proto3</code> æ˜¯ Protocol Buffers çš„æœ€æ–°ç‰ˆæœ¬ï¼Œç›¸æ¯”
<code>proto2</code>ï¼Œç®€åŒ–äº†ä¸€äº›è§„åˆ™å’ŒåŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼Œç§»é™¤äº†å¯é€‰å­—æ®µé»˜è®¤å€¼ç­‰ï¼‰ã€‚</p>
<h3 id="åŒ…å£°æ˜package-declaration">2. <strong>åŒ…å£°æ˜ï¼ˆPackage
Declarationï¼‰</strong></h3>
<p><figure class="highlight proto"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> example;</span><br></pre></td></tr></table></figure> - å£°æ˜äº† <code>.proto</code>
æ–‡ä»¶æ‰€å±çš„åŒ…ã€‚åŒ…åç”¨äºç»„ç»‡ä»£ç ç»“æ„ï¼Œé¿å…å‘½åå†²çªã€‚åœ¨ç”Ÿæˆä»£ç æ—¶ï¼Œè¿™ä¸ªåŒ…åä¼šæ˜ å°„åˆ°ç›®æ ‡è¯­è¨€ä¸­çš„å‘½åç©ºé—´ï¼Œä¾‹å¦‚åœ¨
Go ä¸­ä¼šç”Ÿæˆç›¸åº”çš„ <code>package</code>ã€‚</p>
<h3 id="å¯¼å…¥imports">3. <strong>å¯¼å…¥ï¼ˆImportsï¼‰</strong></h3>
<p><figure class="highlight proto"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"google/protobuf/timestamp.proto"</span>;</span><br></pre></td></tr></table></figure> - ç”¨äºå¼•å…¥å…¶ä»– <code>.proto</code>
æ–‡ä»¶ï¼Œé‡ç”¨å…¶ä¸­å®šä¹‰çš„æ¶ˆæ¯æˆ–æœåŠ¡ã€‚æ¯”å¦‚
<code>google/protobuf/timestamp.proto</code> æä¾›äº†
<code>Timestamp</code>
ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºæ—¶é—´æˆ³ã€‚å¯¼å…¥çš„æ–‡ä»¶å¯ä»¥æ˜¯æ ‡å‡†åº“æ–‡ä»¶æˆ–ç”¨æˆ·è‡ªå®šä¹‰æ–‡ä»¶ã€‚</p>
<h3 id="æ¶ˆæ¯å®šä¹‰message-definition">4. <strong>æ¶ˆæ¯å®šä¹‰ï¼ˆMessage
Definitionï¼‰</strong></h3>
<p><figure class="highlight proto"><table><tr><td class="code"><pre><span class="line"><span class="keyword">message </span><span class="title class_">ExampleMessage</span> {</span><br><span class="line">    <span class="type">int32</span> id = <span class="number">1</span>;</span><br><span class="line">    <span class="type">string</span> name = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">repeated</span> <span class="type">string</span> tags = <span class="number">3</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure> - <code>message</code> å®šä¹‰äº†æ•°æ®ç»“æ„ï¼Œæ¯ä¸ª
<code>message</code>
ç›¸å½“äºä¸€ä¸ªå¯¹è±¡æˆ–ç»“æ„ä½“ã€‚æ¶ˆæ¯ä¸­åŒ…å«å­—æ®µï¼Œæ¯ä¸ªå­—æ®µéƒ½æœ‰ç±»å‹ã€åç§°å’Œå”¯ä¸€çš„æ ‡ç­¾ç¼–å·ã€‚
- å­—æ®µçš„æ ‡ç­¾ç¼–å·ï¼ˆå¦‚
<code>id = 1</code>ï¼‰ç”¨äºåœ¨åºåˆ—åŒ–æ•°æ®æ—¶æ ‡è¯†å­—æ®µï¼Œç¡®ä¿æ¶ˆæ¯çš„å…¼å®¹æ€§ã€‚ä¸åŒç±»å‹å­—æ®µçš„ä½œç”¨ï¼š
- <code>int32</code>ã€<code>string</code> ç­‰åŸºæœ¬ç±»å‹ã€‚ -
<code>repeated</code> è¡¨ç¤ºæ•°ç»„æˆ–åˆ—è¡¨ï¼Œå¯ä»¥åŒ…å«å¤šä¸ªç›¸åŒç±»å‹çš„å…ƒç´ ã€‚</p>
<h3 id="æœåŠ¡å®šä¹‰service-definition">5. <strong>æœåŠ¡å®šä¹‰ï¼ˆService
Definitionï¼‰</strong></h3>
<p><figure class="highlight proto"><table><tr><td class="code"><pre><span class="line"><span class="keyword">service </span><span class="title class_">ExampleService</span> {</span><br><span class="line">    <span class="function"><span class="keyword">rpc</span> GetExample (ExampleRequest) <span class="keyword">returns</span> (ExampleResponse)</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure> - å®šä¹‰æœåŠ¡æ¥å£ï¼Œç±»ä¼¼äºå®šä¹‰ API
çš„ç«¯ç‚¹ã€‚<code>service</code> å†…éƒ¨åŒ…å«ä¸€ç»„ RPC
æ–¹æ³•ï¼Œç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚ - æ¯ä¸ª RPC
æ–¹æ³•æŒ‡å®šè¯·æ±‚å’Œå“åº”çš„æ¶ˆæ¯ç±»å‹ï¼ˆå¦‚ <code>ExampleRequest</code> å’Œ
<code>ExampleResponse</code>ï¼‰ï¼Œå®šä¹‰äº†å®¢æˆ·ç«¯è°ƒç”¨è¯¥æ–¹æ³•æ—¶éœ€è¦çš„è¾“å…¥å’Œè¿”å›çš„è¾“å‡ºã€‚</p>
<h3 id="æšä¸¾ç±»å‹enum-definition">6. <strong>æšä¸¾ç±»å‹ï¼ˆEnum
Definitionï¼‰</strong></h3>
<p><figure class="highlight proto"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum </span><span class="title class_">Status</span> {</span><br><span class="line">    UNKNOWN = <span class="number">0</span>;</span><br><span class="line">    ACTIVE = <span class="number">1</span>;</span><br><span class="line">    INACTIVE = <span class="number">2</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure> -
å®šä¹‰æšä¸¾ç±»å‹ï¼Œæä¾›ä¸€ç»„å‘½åå¸¸é‡ã€‚æ¯ä¸ªæšä¸¾å€¼éƒ½æœ‰ä¸€ä¸ªç¼–å·ï¼Œé€šå¸¸ä»
<code>0</code>
å¼€å§‹ã€‚è¿™äº›å¸¸é‡å¯ä»¥åœ¨æ¶ˆæ¯ä¸­ç”¨ä½œå­—æ®µçš„å€¼ï¼Œç”¨äºè¡¨ç¤ºä¸€ç»„æœ‰é™çš„é€‰é¡¹æˆ–çŠ¶æ€ã€‚</p>
<h3 id="ç¤ºä¾‹-.proto-æ–‡ä»¶ç»“æ„">ç¤ºä¾‹ <code>.proto</code> æ–‡ä»¶ç»“æ„</h3>
<figure class="highlight proto"><table><tr><td class="code"><pre><span class="line">syntax = <span class="string">"proto3"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"google/protobuf/timestamp.proto"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">message </span><span class="title class_">ExampleRequest</span> {</span><br><span class="line">    <span class="type">int32</span> id = <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">message </span><span class="title class_">ExampleResponse</span> {</span><br><span class="line">    <span class="type">string</span> message = <span class="number">1</span>;</span><br><span class="line">    google.protobuf.Timestamp timestamp = <span class="number">2</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum </span><span class="title class_">Status</span> {</span><br><span class="line">    UNKNOWN = <span class="number">0</span>;</span><br><span class="line">    ACTIVE = <span class="number">1</span>;</span><br><span class="line">    INACTIVE = <span class="number">2</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">service </span><span class="title class_">ExampleService</span> {</span><br><span class="line">    <span class="function"><span class="keyword">rpc</span> GetExample (ExampleRequest) <span class="keyword">returns</span> (ExampleResponse)</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<p><strong>Protocol Buffersï¼ˆ.proto æ–‡ä»¶ï¼‰</strong>
æ˜¯ä¸€ç§ä¸è¯­è¨€æ— å…³ã€å¹³å°æ— å…³çš„åºåˆ—åŒ–æ•°æ®ç»“æ„å®šä¹‰æ–¹å¼ï¼Œä¸»è¦ç”¨äºå®šä¹‰å¤æ‚çš„æ•°æ®å®ä½“ä»¥åŠæœåŠ¡æ¥å£ã€‚è™½ç„¶å®ƒåœ¨
Go ä¸­éå¸¸å¸¸ç”¨ï¼Œä½†å®ƒå¹¶ä¸å±€é™äº Goï¼Œå…¶ä»–è¯­è¨€ï¼ˆå¦‚
Pythonã€Javaã€C++ï¼‰ä¹Ÿå¯ä»¥é€šè¿‡ <code>.proto</code>
æ–‡ä»¶ç”Ÿæˆç›¸åº”çš„æ•°æ®ç»“æ„å’Œä»£ç ã€‚</p>
<p>åœ¨ Go ä¸­ï¼Œ<code>.proto</code> æ–‡ä»¶é€šå¸¸ç”¨æ¥å®šä¹‰ä»¥ä¸‹å†…å®¹ï¼š</p>
<ol type="1">
<li><strong>æ•°æ®ç»“æ„</strong>ï¼šå®šä¹‰å¤æ‚çš„æ•°æ®å®ä½“ï¼ˆ<code>message</code>ï¼‰ï¼ŒåŒ…å«å­—æ®µç±»å‹å’Œåºå·ï¼Œç”¨äºè·¨ç½‘ç»œä¼ è¾“å’Œå­˜å‚¨ã€‚</li>
<li><strong>æœåŠ¡æ¥å£</strong>ï¼šå®šä¹‰ gRPC
æœåŠ¡ï¼ˆ<code>service</code>ï¼‰ï¼ŒåŒ…å«å¯è°ƒç”¨çš„ RPC
æ–¹æ³•ï¼Œè§„å®šäº†è¯·æ±‚å’Œå“åº”ç±»å‹ï¼Œä½¿ä¸åŒæœåŠ¡ä¹‹é—´èƒ½å¤Ÿè¿›è¡Œ RPC é€šä¿¡ã€‚</li>
</ol>
<p>å› æ­¤ï¼Œ<code>.proto</code>
æ–‡ä»¶çš„ä½œç”¨ä¸ä»…ä»…æ˜¯å®šä¹‰æ•°æ®ç»“æ„ï¼Œè¿˜å¯ä»¥å®šä¹‰æœåŠ¡æ¥å£ï¼Œä½¿å¾—ä¸åŒæœåŠ¡ä¹‹é—´èƒ½å¤Ÿé«˜æ•ˆé€šä¿¡ã€‚</p>
<h2 id="keeper-1">Keeper</h2>
<p>åœ¨ Cosmos SDK çš„é¡¹ç›®ç»“æ„ä¸­ï¼Œ<code>keeper</code>
æ–‡ä»¶å¤¹ä¸»è¦è´Ÿè´£æ¨¡å—å†…éƒ¨çš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†ã€‚<code>keeper</code>
æ˜¯æ¯ä¸ª Cosmos SDK
æ¨¡å—çš„é‡è¦ç»„ä»¶ï¼Œå®ƒå°è£…äº†æ¨¡å—çš„æ•°æ®è®¿é—®å’Œæ“ä½œé€»è¾‘ï¼Œç¡®ä¿æ•°æ®çš„è¯»å–å’Œå†™å…¥æ˜¯å®‰å…¨ä¸”ä¸€è‡´çš„ã€‚ä»¥ä¸‹æ˜¯
<code>keeper</code> æ–‡ä»¶å¤¹çš„ä¸»è¦å†…å®¹ï¼š</p>
<h3 id="keeper-ç»“æ„ä½“">1. <strong>Keeper ç»“æ„ä½“</strong></h3>
<ul>
<li><code>keeper</code> æ–‡ä»¶å¤¹é€šå¸¸åŒ…å«ä¸€ä¸ª <code>Keeper</code>
ç»“æ„ä½“ï¼Œè¯¥ç»“æ„ä½“è´Ÿè´£ç®¡ç†æ¨¡å—çš„çŠ¶æ€ã€é…ç½®å’Œä¾èµ–ã€‚å®ƒé€šå¸¸åŒ…å«ä¸€äº›å­˜å‚¨çš„å¼•ç”¨ã€å…¶ä»–æ¨¡å—çš„æ¥å£ä»¥åŠä¸Šä¸‹æ–‡ï¼Œæ–¹ä¾¿æ¨¡å—ä¸
Cosmos SDK çš„å…¶ä»–éƒ¨åˆ†è¿›è¡Œäº¤äº’ã€‚</li>
<li>å…¸å‹çš„ <code>Keeper</code>
ç»“æ„ä½“å®šä¹‰ä¼šåŒ…å«æ¨¡å—çš„å­˜å‚¨å™¨ï¼ˆstoreï¼‰ã€ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰ã€å…¶ä»–æ¨¡å—çš„å¼•ç”¨ç­‰ï¼Œç¡®ä¿æ¨¡å—ä¹‹é—´çš„æ•°æ®å¯ä»¥å®‰å…¨åœ°è®¿é—®å’Œä¿®æ”¹ã€‚</li>
</ul>
<p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Keeper <span class="keyword">struct</span> {</span><br><span class="line">    storeKey   sdk.StoreKey</span><br><span class="line">    cdc        codec.BinaryCodec</span><br><span class="line">    bankKeeper types.BankKeeper</span><br><span class="line">    <span class="comment">// å…¶ä»–ä¾èµ–</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h3 id="æ„é€ å‡½æ•°">2. <strong>æ„é€ å‡½æ•°</strong></h3>
<ul>
<li><code>keeper</code> æ–‡ä»¶å¤¹ä¸­é€šå¸¸ä¼šå®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨äºåˆå§‹åŒ–
<code>Keeper</code>
ç»“æ„ä½“ã€‚æ„é€ å‡½æ•°ä¼šæ¥å—å¿…è¦çš„ä¾èµ–ï¼ˆå¦‚å­˜å‚¨é”®ã€ç¼–ç å™¨å’Œå…¶ä»–æ¨¡å—çš„
keeperï¼‰ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™ <code>Keeper</code> ç»“æ„ä½“ã€‚</li>
<li>é€šè¿‡æ„é€ å‡½æ•°ï¼Œæ¨¡å—å¯ä»¥ç¡®ä¿åœ¨åˆ›å»ºæ—¶æ­£ç¡®é…ç½®å¹¶æä¾›æ‰€æœ‰ä¾èµ–å…³ç³»ã€‚</li>
</ul>
<p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewKeeper</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    cdc codec.BinaryCodec,</span></span></span><br><span class="line"><span class="params"><span class="function">    key sdk.StoreKey,</span></span></span><br><span class="line"><span class="params"><span class="function">    bankKeeper types.BankKeeper,</span></span></span><br><span class="line"><span class="params"><span class="function">    // å…¶ä»–ä¾èµ–</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span> Keeper {</span><br><span class="line">    <span class="keyword">return</span> Keeper{</span><br><span class="line">        storeKey: key,</span><br><span class="line">        cdc:      cdc,</span><br><span class="line">        bankKeeper: bankKeeper,</span><br><span class="line">        <span class="comment">// å…¶ä»–èµ‹å€¼</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h3 id="æŸ¥è¯¢é€»è¾‘">3. <strong>æŸ¥è¯¢é€»è¾‘</strong></h3>
<ul>
<li><code>keeper</code>
æ–‡ä»¶å¤¹åŒ…å«æŸ¥è¯¢å‡½æ•°ï¼Œç”¨äºå¤„ç†æ¨¡å—çš„è‡ªå®šä¹‰æŸ¥è¯¢è¯·æ±‚ã€‚è¿™äº›å‡½æ•°é€šè¿‡
<code>gRPC</code> å’Œ <code>CLI</code>
æ¥å£å‘å¤–éƒ¨æä¾›æ¨¡å—æ•°æ®çš„æŸ¥è¯¢ã€‚</li>
<li>æŸ¥è¯¢å‡½æ•°ä¼šæ¥å—ä¸Šä¸‹æ–‡å’Œè¯·æ±‚å‚æ•°ï¼Œè®¿é—®çŠ¶æ€å­˜å‚¨ï¼Œå¹¶è¿”å›å“åº”ã€‚è¿™äº›å‡½æ•°ä¸€èˆ¬ä½äº
<code>query_xxx.go</code> æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚
<code>query_say_hello.go</code>ã€‚</li>
</ul>
<p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(k Keeper)</span></span> SayHello(ctx context.Context, req *types.QuerySayHelloRequest) (*types.QuerySayHelloResponse, <span class="type">error</span>) {</span><br><span class="line">    <span class="comment">// å®ç°æŸ¥è¯¢é€»è¾‘</span></span><br><span class="line">    <span class="keyword">return</span> &amp;types.QuerySayHelloResponse{Name: <span class="string">"Hello Cosmos"</span>}, <span class="literal">nil</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h3 id="æ¶ˆæ¯å¤„ç†é€»è¾‘">4. <strong>æ¶ˆæ¯å¤„ç†é€»è¾‘</strong></h3>
<ul>
<li><code>keeper</code>
æ–‡ä»¶å¤¹ä¸­è¿˜åŒ…å«æ¨¡å—çš„æ¶ˆæ¯å¤„ç†é€»è¾‘ã€‚æ¶ˆæ¯æ˜¯æ¨¡å—å¯¹åŒºå—é“¾çŠ¶æ€è¿›è¡Œæ“ä½œçš„ä¸»è¦æ‰‹æ®µã€‚æ¯ä¸ªæ¶ˆæ¯å¤„ç†å‡½æ•°éƒ½ä¼šåœ¨
<code>keeper</code> ä¸­å®ç°ï¼Œå¹¶ä¸”é€šå¸¸ä¼šåœ¨ <code>msg_xxx.go</code>
æ–‡ä»¶ä¸­å®šä¹‰ã€‚</li>
<li>æ¶ˆæ¯å¤„ç†å‡½æ•°é€šè¿‡æ¥æ”¶è¯·æ±‚å‚æ•°å’Œä¸Šä¸‹æ–‡æ‰§è¡Œç‰¹å®šçš„çŠ¶æ€æ›´æ”¹ï¼Œå¦‚æ›´æ–°è´¦æˆ·ä½™é¢ã€ä¿®æ”¹å‚æ•°ç­‰ã€‚</li>
</ul>
<p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(k Keeper)</span></span> HandleMsgSend(ctx sdk.Context, msg *types.MsgSend) (*types.MsgSendResponse, <span class="type">error</span>) {</span><br><span class="line">    <span class="comment">// å®ç°æ¶ˆæ¯å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="keyword">return</span> &amp;types.MsgSendResponse{}, <span class="literal">nil</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h3 id="çŠ¶æ€ç®¡ç†">5. <strong>çŠ¶æ€ç®¡ç†</strong></h3>
<ul>
<li><code>keeper</code>
æ–‡ä»¶å¤¹è¿˜åŒ…å«çŠ¶æ€ç®¡ç†ç›¸å…³çš„é€»è¾‘ï¼Œç”¨äºç›´æ¥ä¸åŒºå—é“¾çš„å­˜å‚¨å±‚äº¤äº’ã€‚<code>Keeper</code>
ç»“æ„ä½“ä¼šä½¿ç”¨å­˜å‚¨å™¨è®¿é—®æ¨¡å—çš„çŠ¶æ€æ•°æ®ï¼Œå¹¶æä¾›åˆ›å»ºã€è¯»å–ã€æ›´æ–°å’Œåˆ é™¤ï¼ˆCRUDï¼‰æ“ä½œã€‚</li>
<li>è¿™äº›çŠ¶æ€ç®¡ç†å‡½æ•°ç¡®ä¿æ•°æ®çš„æŒä¹…æ€§å’Œä¸€è‡´æ€§ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æœ‰
<code>SetData</code> å’Œ <code>GetData</code>
å‡½æ•°ï¼Œç”¨äºå†™å…¥å’Œè¯»å–æ¨¡å—æ•°æ®ã€‚</li>
</ul>
<p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(k Keeper)</span></span> SetData(ctx sdk.Context, key <span class="type">string</span>, value <span class="type">string</span>) {</span><br><span class="line">    store := ctx.KVStore(k.storeKey)</span><br><span class="line">    store.Set([]<span class="type">byte</span>(key), []<span class="type">byte</span>(value))</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(k Keeper)</span></span> GetData(ctx sdk.Context, key <span class="type">string</span>) (<span class="type">string</span>, <span class="type">error</span>) {</span><br><span class="line">    store := ctx.KVStore(k.storeKey)</span><br><span class="line">    bz := store.Get([]<span class="type">byte</span>(key))</span><br><span class="line">    <span class="keyword">if</span> bz == <span class="literal">nil</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>, errors.New(<span class="string">"not found"</span>)</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="type">string</span>(bz), <span class="literal">nil</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h3 id="äº‹ä»¶è®°å½•">6. <strong>äº‹ä»¶è®°å½•</strong></h3>
<ul>
<li>åœ¨æŸäº›ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œ<code>Keeper</code>
è¿˜ä¼šä½¿ç”¨äº‹ä»¶è®°å½•æ¥è¿½è¸ªæ“ä½œã€‚è¿™äº›äº‹ä»¶å¯ä»¥ç”¨äºé“¾ä¸Šå’Œé“¾ä¸‹åˆ†æï¼Œå¦‚è®°å½•äº¤æ˜“æˆ–æ•°æ®æ›´æ–°ã€‚</li>
<li>äº‹ä»¶è®°å½•é€šå¸¸é€šè¿‡ <code>ctx.EventManager()</code>
ç”Ÿæˆï¼Œå¹¶éšæ¨¡å—çš„æ“ä½œä¸€èµ·å†™å…¥åŒºå—é“¾æ—¥å¿—ã€‚</li>
</ul>
<h3 id="æ€»ç»“-1">æ€»ç»“</h3>
<p><code>keeper</code> æ–‡ä»¶å¤¹åœ¨ Cosmos SDK
æ¨¡å—ä¸­æ‰®æ¼”äº†æ ¸å¿ƒè§’è‰²ï¼Œè´Ÿè´£ç®¡ç†æ¨¡å—çš„ä¸šåŠ¡é€»è¾‘ã€æŸ¥è¯¢å’ŒçŠ¶æ€å­˜å‚¨ã€‚å®ƒä¸ºæ¨¡å—æä¾›äº†ç»Ÿä¸€çš„æ¥å£ä¸å…¶ä»–æ¨¡å—å’Œå­˜å‚¨è¿›è¡Œäº¤äº’ï¼Œç¡®ä¿æ•°æ®æ“ä½œçš„å®‰å…¨æ€§å’Œä¸€è‡´æ€§ã€‚</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/" rel="tag"><i class="fa fa-tag"></i> åŒºå—é“¾</a>
              <a href="/tags/%E6%AF%95%E8%AE%BE/" rel="tag"><i class="fa fa-tag"></i> æ¯•è®¾</a>
              <a href="/tags/Cosmos/" rel="tag"><i class="fa fa-tag"></i> Cosmos</a>
              <a href="/tags/Go/" rel="tag"><i class="fa fa-tag"></i> Go</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/CS2030/Mock/" rel="prev" title="æ–°åŠ å¡å›½ç«‹ CS2030 æœŸä¸­æ¨¡æ‹Ÿè€ƒè®²è§£">
                  <i class="fa fa-angle-left"></i> æ–°åŠ å¡å›½ç«‹ CS2030 æœŸä¸­æ¨¡æ‹Ÿè€ƒè®²è§£
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/CS2030/2024-11-02-%E6%96%B0%E5%8A%A0%E5%9D%A1%E5%9B%BD%E7%AB%8B-CS2030-%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/" rel="next" title="æ–°åŠ å¡å›½ç«‹ CS2030 çŸ¥è¯†ç‚¹æ•´ç†">
                  æ–°åŠ å¡å›½ç«‹ CS2030 çŸ¥è¯†ç‚¹æ•´ç† <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2024 â€“ 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Cishoon</span>
  </div><div class="footer-custom">
Website source code <span class="exturl theme-link" data-url="aHR0cHM6Ly9naXRodWIuY29tL0Npc2hvb24vYmxvZw==">here</span>
</div>


    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL0Npc2hvb24=" title="åœ¨ GitHub ä¸Šå…³æ³¨æˆ‘" aria-label="åœ¨ GitHub ä¸Šå…³æ³¨æˆ‘"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/comments.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/utils.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/motion.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/sidebar.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/next-boot.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/pjax.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/third-party/search/local-search.min.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.0/mermaid.min.js","integrity":"sha256-stuqcu2FrjYCXDOytWFA5SoUE/r3nkp6gTglzNSlavU="}}</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/third-party/tags/mermaid.min.js"></script>

  <script class="next-config" data-name="wavedrom" type="application/json">{"enable":true,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/wavedrom/3.5.0/wavedrom.min.js","integrity":"sha256-INLAoJc6quTNfiMWkGZniYO2cxE8mHpddnLow1m6RFs="}}</script>
  <script class="next-config" data-name="wavedrom_skin" type="application/json">{"enable":true,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/wavedrom/3.5.0/skins/default.js","integrity":"sha256-fduc/Zszk5ezWws2uInY/ALWVmIrmV6VTgXbsYSReFI="}}</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/third-party/tags/wavedrom.min.js"></script>




  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":"true                   ---------------------> è®¾ç½®ä¸ºtrue","tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/third-party/math/mathjax.min.js"></script>



</body>
</html>
