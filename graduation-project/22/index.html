<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="5AUIVYTbHIAuz-eQtxSfZbWW5eg9_EVZMSQycIuXrG0">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"cishoon.top","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.20.0","exturl":true,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"default"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/config.min.js"></script>

    <meta name="description" content="论文草稿">
<meta property="og:type" content="article">
<meta property="og:title" content="毕设22 - 论文的草稿">
<meta property="og:url" content="http://cishoon.top/graduation-project/22/index.html">
<meta property="og:site_name" content="Cishoon&#39;s Blog">
<meta property="og:description" content="论文草稿">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://cishoon.top/graduation-project/22/image-20250409195400465.png">
<meta property="og:image" content="http://cishoon.top/graduation-project/22/image-20250409141626140.png">
<meta property="og:image" content="http://cishoon.top/graduation-project/22/image-20250409141744802.png">
<meta property="og:image" content="http://cishoon.top/graduation-project/22/line-smooth-5239037.png">
<meta property="og:image" content="http://cishoon.top/graduation-project/22/line-smooth%20(1)-5239037.png">
<meta property="og:image" content="http://cishoon.top/graduation-project/22/line-smooth%20(2)-5239037.png">
<meta property="og:image" content="http://cishoon.top/graduation-project/22/line-smooth%20(3)-5239037.png">
<meta property="article:published_time" content="2025-04-04T16:00:00.000Z">
<meta property="article:modified_time" content="2025-06-02T06:08:12.073Z">
<meta property="article:author" content="Cishoon">
<meta property="article:tag" content="TrustZone">
<meta property="article:tag" content="智能合约">
<meta property="article:tag" content="毕设">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://cishoon.top/graduation-project/22/image-20250409195400465.png">


<link rel="canonical" href="http://cishoon.top/graduation-project/22/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://cishoon.top/graduation-project/22/","path":"graduation-project/22/","title":"毕设22 - 论文的草稿"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>毕设22 - 论文的草稿 | Cishoon's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-43861RVV8R"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-43861RVV8R","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/third-party/analytics/google-analytics.min.js"></script>








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style><link rel="alternate" href="/atom.xml" title="Cishoon's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Cishoon's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">80</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">51</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          目 录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E-trustzone-%E7%9A%84%E5%8C%BA%E5%9D%97%E9%93%BE%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E5%AD%97%E8%BA%AB%E4%BB%BD"><span class="nav-text">基于 TrustZone
的区块链分布式数字身份</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#abstract"><span class="nav-text">Abstract</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#introduction"><span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#related-work"><span class="nav-text">Related Work</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#preliminaries"><span class="nav-text">Preliminaries</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#arm-trustzone"><span class="nav-text">Arm TrustZone</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webassembly"><span class="nav-text">WebAssembly</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E5%AD%97%E8%BA%AB%E4%BB%BDdid"><span class="nav-text">分布式数字身份（DID）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8C%BA%E5%9D%97%E9%93%BE%E5%92%8C%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6"><span class="nav-text">区块链和智能合约</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%89%E6%8B%A9%E6%80%A7%E6%8A%AB%E9%9C%B2%E5%92%8C%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E"><span class="nav-text">选择性披露和零知识证明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cryptographic-primitives%E5%AF%86%E7%A0%81%E5%AD%A6%E5%8E%9F%E8%AF%AD"><span class="nav-text">Cryptographic
Primitives（密码学原语）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86-ecdsaecdh-%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86-aes"><span class="nav-text">非对称加密 ECDSA、ECDH &amp;
对称加密 AES</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#proposed-methods"><span class="nav-text">Proposed Methods</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#trustzone-based-wasm-smart-contract-architecture"><span class="nav-text">TrustZone-Based
Wasm Smart Contract Architecture</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#cosmos-%E5%8C%BA%E5%9D%97%E9%93%BE%E8%8A%82%E7%82%B9%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97"><span class="nav-text">Cosmos
区块链节点模块设计（智能合约管理模块）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#wasm%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%9D%97-smart-contract-execution-module"><span class="nav-text">Wasm智能合约执行模块
Smart Contract Execution Module</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#decentralized-identity-system-design"><span class="nav-text">Decentralized Identity
System Design</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#did-%E6%B3%A8%E5%86%8C"><span class="nav-text">DID 注册</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vc-%E9%A2%81%E5%8F%91"><span class="nav-text">VC 颁发</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vc-%E9%AA%8C%E8%AF%81"><span class="nav-text">VC 验证</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#wasm-%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6"><span class="nav-text">Wasm 智能合约</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#did%E7%B3%BB%E7%BB%9F-%E5%8F%AF%E9%AA%8C%E8%AF%81%E5%87%AD%E8%AF%81%E7%9A%84%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E"><span class="nav-text">DID系统 &amp;
可验证凭证的零知识证明</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95"><span class="nav-text">性能测试</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E9%AA%8C%E8%AE%BE%E7%BD%AE%E4%B8%8E%E6%B5%8B%E8%AF%95%E6%96%B9%E6%A1%88"><span class="nav-text">6.1 实验设置与测试方案</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#section"><span class="nav-text">6.2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#did-%E7%A8%B3%E6%80%81%E6%80%A7%E8%83%BD%E8%AF%84%E4%BC%B0"><span class="nav-text">6.3 DID 稳态性能评估</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E6%8C%87%E6%A0%87"><span class="nav-text">测试指标</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A8-1did-%E5%90%88%E7%BA%A6%E5%8A%9F%E8%83%BD%E7%A8%B3%E6%80%81%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87%E5%8D%95%E7%BA%BF%E7%A8%8B-200-%E6%AC%A1"><span class="nav-text">表 1：DID
合约功能稳态性能指标（单线程 × 200 次）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E6%9E%9C%E5%88%86%E6%9E%90"><span class="nav-text">结果分析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E8%AE%BA"><span class="nav-text">结论</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#conclusion"><span class="nav-text">Conclusion</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Cishoon"
      src="/images/cishoon.jpg">
  <p class="site-author-name" itemprop="name">Cishoon</p>
  <div class="site-description" itemprop="description">一条数学公式 + 一个简单的故事</div>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Npc2hvb24=" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;cishoon"><i class="fab fa-github fa-fw"></i></span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vMTA2Njk1NDg4" title="哔哩哔哩 → https:&#x2F;&#x2F;space.bilibili.com&#x2F;106695488"><i class="fa-brands fa-bilibili fa-fw"></i></span>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cishoon.top/graduation-project/22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/cishoon.jpg">
      <meta itemprop="name" content="Cishoon">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cishoon's Blog">
      <meta itemprop="description" content="一条数学公式 + 一个简单的故事">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="毕设22 - 论文的草稿 | Cishoon's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          毕设22 - 论文的草稿<span class="exturl post-edit-link" data-url="aHR0cHM6Ly9naXRodWIuY29tL0Npc2hvb24vYmxvZy90cmVlL21haW4vc291cmNlL19wb3N0cy9ncmFkdWF0aW9uLXByb2plY3QvMjIubWQ=" title="编辑"><i class="fa fa-pen-nib"></i></span>
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-04-05 00:00:00" itemprop="dateCreated datePublished" datetime="2025-04-05T00:00:00+08:00">2025-04-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>17k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>15 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>论文草稿</p>
<span id="more"></span>
<h1 id="基于-trustzone-的区块链分布式数字身份">基于 TrustZone
的区块链分布式数字身份</h1>
<p>智能合约+Wasm+TrustZone 做了一个结合。</p>
<ul>
<li><p>TrustZone：区块链上实现隐私计算，例如可以实现匿名投票、数字身份的零知识证明</p></li>
<li><p>Wasm
：降低智能合约开发难度，易于扩展。（现有的智能合约+TrustZone的论文，要实现一个新的智能合约就得重新写一个新的TA）</p></li>
</ul>
<p>TrustZone 分为 REE 和 TEE 两部分</p>
<ul>
<li>REE 侧负责区块链除了智能合约以外的工作，包括共识等</li>
<li>TEE 侧负责执行智能合约。TA 内嵌入了一个 wasm 运行时，可以执行 wasm
字节码</li>
</ul>
<p>TEE
的安全存储中存放一个共享的私钥；区块链上公开对应的公钥。（可以通过非对称加密方式，实现隐私保护）</p>
<p>比如数字身份系统中，用户提供给验证者加密后的VC，验证者将VC发送给区块链进行验证，区块链可以解密VC、验证正确性，将结果返回给验证者。实现零知识证明。</p>
<p>先看一下要做哪些实验。</p>
<p>方法定型了。</p>
<p>验证一下都有效，做批量实验。</p>
<p>智能合约 + Wasm + TrustZone</p>
<ol type="1">
<li>介绍背景，方法</li>
<li>看一下相关工作</li>
<li>至少做两个实验，找一个基础方法来对比一下</li>
<li>能做什么做什么，可以</li>
<li>preliminary，相关工作，方法</li>
<li>攻击实验，</li>
<li>看别人did的论文都用什么指标的评估</li>
</ol>
<p>智能合约，TrustZone，Wasm，</p>
<h1 id="abstract">Abstract</h1>
<p>随着区块链技术的发展，越来越多的应用对链上计算提出了隐私保护与可信执行的更高要求。然而，传统智能合约在执行过程中公开所有输入、状态与逻辑，难以满足涉及敏感数据场景下的隐私需求。针对这一问题，本文提出了一种基于
ARM TrustZone 与
WebAssembly（Wasm）的轻量级智能合约执行架构。该系统通过将合约逻辑与数据处理隔离至
TrustZone
安全世界，实现了硬件级的隐私保护，同时保持了与标准区块链框架的良好兼容性。为支持链上请求与受限环境下可信执行的协同，本文设计了基于共享内存与扩展
WASI 接口的高效通信机制。</p>
<p>在此基础上，本文实现了一个支持加密形式下可验证凭证（VC）校验的去中心化身份（DID）系统，采用
ECDH 密钥交换与 AES
加密，提供轻量级的零知识式认证功能，适用于资源受限环境。实验评估表明，尽管引入了
TrustZone
带来一定的性能开销，系统在查询、交易及隐私验证等操作中仍保持了良好的延迟与吞吐表现。研究结果验证了在移动终端与边缘计算设备上部署隐私增强型智能合约系统的可行性，为隐私保护型链上计算提供了一种切实可行的解决方案。</p>
<p>With the advancement of blockchain technology, an increasing number
of applications demand stronger privacy protection and trusted execution
for on-chain computation. However, traditional smart contracts expose
all inputs, states, and logic during execution, posing significant
privacy risks in scenarios involving sensitive data. To address this
issue, this paper proposes a lightweight smart contract execution
architecture based on ARM TrustZone and WebAssembly (Wasm). By isolating
contract logic and data processing within the TrustZone Secure World,
the system achieves hardware-level privacy protection while maintaining
compatibility with standard blockchain frameworks. To support
collaboration between on-chain requests and trusted execution in
constrained environments, an efficient communication mechanism based on
shared memory and extended WASI interfaces is designed.</p>
<p>Building on this architecture, we implement a decentralized identity
(DID) system that supports verifiable credential (VC) verification in
encrypted form. By leveraging ECDH key agreement and AES encryption, the
system provides lightweight zero-knowledge style authentication suitable
for resource-constrained environments. Experimental evaluations show
that although TrustZone introduces some performance overhead, the system
maintains good latency and throughput performance in query, transaction,
and privacy verification operations. The results validate the
feasibility of deploying privacy-enhancing smart contracts on mobile and
edge devices, offering a practical solution for privacy-preserving
on-chain computation.</p>
<h1 id="introduction">Introduction</h1>
<p>随着区块链技术的发展，越来越多的应用对链上计算提出了隐私保护与可信执行的更高要求。传统智能合约的执行过程完全公开，所有输入、状态与逻辑均暴露于链上，对于涉及用户身份、行为记录等敏感数据的应用场景（如隐私投票、身份验证、医疗数据共享等）而言，存在严重的隐私泄露风险。因此，如何在保证合约可验证性的前提下实现隐私保护，成为区块链系统设计中的关键挑战。</p>
<p>为实现隐私保护与结果可验证兼备的链上计算，现有研究主要沿两条路径展开：一是利用零知识证明技术，使验证方在不获取原始数据的情况下验证计算结果的正确性；二是通过可信执行环境（TEE）提供硬件级隔离，确保合约逻辑在受保护的环境中运行。这些方案虽在安全性和隐私性方面表现出色，但通常存在部署门槛高、计算资源消耗大或依赖特定硬件平台等限制，难以满足轻量化、可移植的区块链应用需求。</p>
<p>为解决现有隐私计算方案在资源占用与开发复杂性上的局限，本文提出一种基于
<strong>ARM TrustZone 和 WebAssembly（Wasm）</strong>
的轻量级隐私保护智能合约系统。该系统以 TrustZone
作为合约执行的可信基础，通过引入 Wasm
运行环境，支持在受限设备上灵活部署与安全执行合约逻辑，兼顾隐私性与可验证性。</p>
<p>在该架构基础上，我们设计并实现了一个分布式数字身份系统，允许用户在不泄露身份敏感信息的前提下完成特定身份属性的可信验证。该系统基于硬件信任机制实现零知识式的凭证校验，具备计算开销低、无需可信设定、部署门槛低等优点，特别适用于移动终端和边缘计算等场景下的隐私保护需求。</p>
<p>本文的主要贡献如下：</p>
<ul>
<li>提出一种基于 TrustZone 和 Wasm 的智能合约执行架构，实现合约逻辑在
TEE 中的安全执行与链上状态交互。</li>
<li>设计并实现一个轻量级分布式数字身份系统，支持 VC
的加密提交与可信验证，保护用户隐私。</li>
<li>提出一种结合共享密钥协商与对称加密的“零知识式”验证机制，替代传统 ZK
方法，适用于资源受限设备。</li>
</ul>
<h1 id="related-work">Related Work</h1>
<p>安全、隐私的智能合约，有一些实现，但是使用困难，不容易应用于开发场景。</p>
<p>DID系统的零知识证明，多基于数学层面，证明生成开销大，实现复杂，对硬件依赖较重。</p>
<blockquote>
<p>口语化的写一下：</p>
<p>TZ4Fabric: Executing Smart Contracts with ARM TrustZone，实现在 TEE
中执行 Fabric 的链码。</p>
<p>但是，这个项目有几个缺陷。第一，TZ4Fabric
中所谓的链码，本质上就是一个TA。每要实现一个新的链码，就要重写一个 TA
。TA
的执行过程是一个状态机，明确的将一个智能合约请求分割成几个操作步骤，如获取状态、写入状态等。对于一些复杂的智能合约，这样的TA就会变得极为复杂，难以维护。</p>
<p>第二，用户想要部署新的智能合约，必须更新区块链节点代码、修改
chaincode_proxy 使其可以代理新的
TA、重新编译新的链码。这个过程必须要重启TrustZone的服务，更新区块链实现。在实际场景中显然是不现实的。</p>
<p><del>第三，网络请求的方式调用链码，一定程度增加了系统的延迟，增强了系统被攻击的可能。</del>（论文中提到了，主要性能瓶颈不在网络请求而是在于TEEC_OpenSession）</p>
</blockquote>
<blockquote>
<p>WaTZ提供了一种在TrustZone中移植WAMR的方法，本文在其基础上，实现了能在的TEE中运行
wasm 智能合约。</p>
</blockquote>
<blockquote>
<p>零知识证明：</p>
<p><strong>zk-SNARK（Zero-Knowledge Succinct Non-Interactive Argument of
Knowledge）</strong>是一类高效的非交互式零知识证明系统，能够为任意计算生成体积极小、验证速度极快的证明。该技术已被应用于
Zcash、Tornado Cash 等项目中，用于实现匿名交易或选择性隐私。</p>
<ul>
<li>需要可信设定（trusted
setup），若初始设定密钥泄露，系统安全性将完全丧失；而该系统私钥存放在
TrustZone 的安全世界，不容易泄露。</li>
<li>开发门槛高，必须将计算逻辑手动转化为电路或约束系统，过程复杂，证明生成开销较大，不适合大规模计算；而该系统只需要用secp256r1交换密钥后对称加密凭证，即可创建零知识证明。</li>
</ul>
<p><strong>zk-STARK（Scalable Transparent ARguments of
Knowledge）</strong>不依赖可信设定，且仅使用哈希函数构建证明，具备抗量子攻击能力，适用于大规模计算验证。StarkWare、StarkNet、zkML
等项目基于此构建高扩展性的区块链和隐私计算系统。</p>
<ul>
<li>开发难度较高，需要将程序转化为中间表示（AIR）并进行特定形式的编译，在移动设备或低功耗环境中部署困难，证明生成对硬件资源依赖较重；该系统在低功耗设备中部署也很简单。</li>
</ul>
<p>虽然现有 zk
系统在安全性与隐私性方面表现出色，但它们普遍存在<strong>计算开销大、开发门槛高、设备适应性差</strong>等问题，不适合资源受限环境或通用开发场景。</p>
<p>相比之下，本文提出的系统利用 <strong>ARM TrustZone
的安全执行环境（TEE）</strong>作为智能合约执行平台，将合约逻辑完全隔离至硬件安全区中，并通过对称加密、共享密钥协商等机制保护用户隐私。该方案无需电路编译、无需可信设定，能够以更高的工程实用性和开发友好性，在移动终端、边缘设备等环境下实现隐私保护与可验证计算。</p>
</blockquote>
<blockquote>
<p>有些研究表明 TrustZone
的安全存储仍存在被攻击的可能，但是这不在本文的研究范围之内。</p>
<p>[Hardware-Backed Heist]</p>
</blockquote>
<p>可信执行环境（Trusted Execution Environment,
TEE）已广泛应用于提升区块链智能合约执行的安全性与隐私性【CosmWasm，】。<strong>TZ4Fabric</strong>
系统 [1] 将 ARM TrustZone 与 Hyperledger Fabric 结合，实现了在 TEE
中执行链码逻辑的功能。然而，该系统存在两个主要局限。首先，TZ4Fabric
中的链码需被实现为独立的 Trusted
Application（TA），其执行逻辑被构建为状态机，需要显式地将智能合约请求分解为获取状态、写入状态等底层操作。对于复杂的业务逻辑，这种方式不仅难以扩展，也极难维护。其次，部署新的智能合约需要修改区块链节点代码、更新代理组件（chaincode
proxy）、重新编译 TA 并重启 TrustZone
服务，在去中心化或动态部署场景下难以落地。</p>
<p><strong>WaTZ</strong> 系统 [2] 提出了一种将 WebAssembly Micro
Runtime（WAMR）[WAMR]嵌入 TrustZone
的方法，并结合远程认证机制构建了多租户可信执行框架。虽然本文并未采用
WaTZ 中的远程认证机制，但在系统实现中参考了其对 WAMR 在 TEE
中移植与封装的技术路线。基于此，本文构建了一个支持通用 WebAssembly
智能合约执行的 TEE 合约运行环境，允许合约在无需修改链核心或重启 TEE
服务的前提下动态部署、加载与执行，显著提升了系统的可扩展性与开发灵活性。</p>
<p>在隐私验证方向，已有大量研究探索零知识证明系统，例如
<strong>zk-SNARK</strong> [3] 与 <strong>zk-STARK</strong>
[4]。前者能够生成体积小、验证快的非交互式证明，已被应用于 Zcash、Tornado
Cash
等项目中，但依赖可信设定，且电路建模复杂、证明生成开销大。后者不依赖可信设定且具备抗量子攻击能力，但对硬件资源要求高，不适用于低功耗设备。相比之下，本文提出的方案采用轻量级的“零知识式”验证方式，用户通过
ECDH 协议生成共享密钥，对凭证进行对称加密，交由 TEE
解密与验证，无需电路转化与证明生成，适合在移动终端或嵌入式设备中部署。</p>
<p>值得指出的是，尽管 TrustZone
提供隔离执行能力，其安全存储机制在特定条件下仍可能受到攻击 [5]。本文默认
TEE 已部署在可信固件之上，相关侧信道或提权攻击不属于本文的研究范围。</p>
<h1 id="preliminaries">Preliminaries</h1>
<h2 id="arm-trustzone">Arm TrustZone</h2>
<p>Arm TrustZone [TrustZone Explained: Architectural Features and Use
Cases] 是 Arm
架构中的一种硬件级安全技术，通过在单个CPU内构建两个隔离的执行环境，即安全世界（Secure
World）和普通世界（Normal
World），以硬件方式确保敏感数据与关键任务的安全性。它使安全任务（如加密密钥管理等）与普通应用程序相互隔离，保护免受恶意软件和未经授权访问的威胁。</p>
<p>OP-TEE [https://www.trustedfirmware.org/projects/op-tee/] 是一个专为
Arm TrustZone
平台设计的开源可信执行环境（TEE）实现。OP-TEE架构分为两个主要组件：在安全世界运行的TEE核心（OP-TEE
OS），以及在普通世界运行的客户端库与驱动（OP-TEE Client）。OP-TEE 通过
GlobalPlatform [GlobalPlatform] 标准化的 TEE 内部
API和外部与普通操作系统的交互接口，允许开发者创建可信应用（Trusted
Applications，TAs）。</p>
<h2 id="webassembly">WebAssembly</h2>
<p>WebAssembly（简称Wasm）[Bringing the web up to speed with
WebAssembly]
是一种面向栈、二进制格式的轻量级虚拟机指令集，最初为了在浏览器中高效、安全地运行代码而设计。它允许开发者使用C、C++、Rust等高级语言编写程序，并将其编译成可跨平台执行的二进制模块，从而在网页上实现接近本地性能的复杂计算任务。WebAssembly具有快速加载、低延迟、语言无关和沙箱化安全执行的特性，已成为浏览器之外的服务器、边缘计算和物联网领域高效运行应用的关键技术。</p>
<h2 id="分布式数字身份did">分布式数字身份（DID）</h2>
<p>分布式数字身份（Decentralized Identifier，简称DID）[W3C DID]
是一种去中心化的数字身份管理方式，使用户能够自主掌控并管理自己的数字身份，无需依赖传统的中心化身份服务商。每个DID都是一个全局唯一的标识符，通常与用户掌控的数字凭证（如密钥）绑定，从而确保身份信息的自主控制性、可验证性和隐私保护。</p>
<p>可验证凭证（Verifiable Credentials，简称VC）[W3C VC]
是为支持可信数字身份信息交换而制定的数字证书标准，通常与DID结合使用。VC
的使用过程通常涉及三个关键参与方VC
的使用过程通常涉及三个关键参与方：发行者（Issuer）、持有者（Holder）和验证方（Verifier）。发行者对凭证进行数字签名，以证明其真实性和有效性；持有者自主存储和管理凭证，并决定凭证的披露范围；验证方则通过密码学方法对凭证进行验证，而无需与发行方直接交互，从而保证验证的安全性和隐私性。</p>
<h2 id="区块链和智能合约">区块链和智能合约</h2>
<p>区块链是一种去中心化的分布式账本技术，将交易数据记录在连续区块中，并在网络节点之间共享与同步，以实现数据的不可篡改和可追溯性。智能合约则是运行在区块链上的自动化程序，以预定义的规则和逻辑来自动执行、验证和强制履行合约条款，从而无需第三方中介即可实现可信交易。区块链与智能合约的结合广泛应用于金融交易、供应链管理、数字身份认证、去中心化应用（DApps）等场景，构建了更透明、安全、高效的数字信任体系。</p>
<h2 id="选择性披露和零知识证明">选择性披露和零知识证明</h2>
<p>选择性披露（Selective
Disclosure）指的是在隐私保护机制中，用户仅披露特定的敏感信息或属性，而不暴露完整的数据。一种常见的实现方法是通过默克尔树（Merkle
tree）来确保信息的完整性。</p>
<p>零知识证明（Zero-Knowledge Proof，简称ZKP）[The knowledge complexity
of interactive proof-systems]
是一种密码学协议，它允许证明方向验证方证明某个陈述或命题的真实性，而无需透露除“命题为真”之外的任何额外信息，即验证者在验证过程中不获得任何关于证明内容的具体知识。零知识证明的关键特性包括完备性（有效证明必被验证接受）、可靠性（虚假证明必被验证拒绝）和零知识性（验证过程中不泄露额外信息）。目前，零知识证明被广泛应用于隐私保护、匿名认证、区块链扩容和可信计算等领域。</p>
<h2 id="cryptographic-primitives密码学原语">Cryptographic
Primitives（密码学原语）</h2>
<h3 id="非对称加密-ecdsaecdh-对称加密-aes">非对称加密 ECDSA、ECDH &amp;
对称加密 AES</h3>
<h1 id="proposed-methods">Proposed Methods</h1>
<p>在本章节中，我们首先提出了一个基于 TrustZone 和 Wasm
的安全智能合约架构，旨在实现高效、安全、易开发的链上隐私计算。该系统通过将智能合约执行环境部署在
TrustZone
的安全世界中，确保敏感数据的处理和合约逻辑的执行完全在硬件隔离环境下完成。同时，该设计使智能合约能够访问<strong>安全原语级别的指令</strong>，从而降低开发复杂度，提升隐私合约的可编程性和可用性。</p>
<p>基于这一架构，我们开发了一个 <strong>DID
智能合约模块</strong>，实现了去中心化身份（Decentralized Identity,
DID）文档的构建、加密形式下的可验证凭证（Verifiable Credential,
VC）校验等核心功能。值得注意的是，其中的加密 VC
校验过程本质上是一种<strong>零知识证明的具体实现</strong>：验证者可以确认用户确实满足某些身份属性（如年龄等），却无法获得具体的明文内容，实现了在受限信任模型下的<strong>轻量级零知识交互</strong>。</p>
<h2 id="trustzone-based-wasm-smart-contract-architecture">TrustZone-Based
Wasm Smart Contract Architecture</h2>
<p>该系统主要由两个核心组成部分构成：一是基于 Cosmos SDK
构建的区块链节点，我们在其原有的交易处理与状态同步基础上，设计并实现了一个智能合约管理模块，用于支持合约的上传、实例化、调用和查询；二是部署于
TrustZone
安全世界中的智能合约执行模块，负责对敏感合约逻辑的执行与隐私数据的处理。两个模块通过跨域通信机制协同工作，实现了链上调度与链下可信执行的分层架构。</p>
<h3 id="cosmos-区块链节点模块设计智能合约管理模块">Cosmos
区块链节点模块设计（智能合约管理模块）</h3>
<p>本系统基于 Cosmos SDK
【Cosmos】框架构建区块链节点，并在此基础上设计了一个专用于智能合约生命周期管理的自定义模块。该模块负责协调链上合约的部署、执行与状态查询，并承担与
TrustZone 安全世界中合约执行引擎之间的通信桥梁作用。</p>
<p>该模块主要包含以下四类功能：（1）合约上传：用户通过交易上传已预编译为
AOT（Ahead-of-Time）格式的 WebAssembly
字节码合约。与传统解释执行不同，AOT
合约在部署前已完成静态机器码生成，具备启动速度快、资源占用低的特点【AOT】。链上模块接收字节码后，生成合约的唯一标识，并将字节码持久化存储于链状态中；（2）合约实例化：用户可通过交易请求对某个已上传的合约字节码进行初始化，并传入初始化参数。实例化过程中系统将为该合约创建一个新的“合约账户”，并调用合约内部定义的
<code>instantiate</code>
函数，完成合约状态的初始化与注册；（3）合约调用：用户可提交交易调用已部署的合约方法。每个合约实例的状态在链上是相互隔离的，合约之间无法直接访问彼此状态，保证了合约执行的封装性与安全性；（4）状态查询：用户可通过执行合约中的只读函数，查询某个合约实例的当前状态。与异步调用不同，状态查询为同步执行，直接从合约存储中读取结果返回给用户。</p>
<p>在与 TrustZone 的协作过程中，Cosmos
区块链节点模块负责将用户提交的合约调用请求进行格式转换和权限校验，并将构造好的执行参数通过安全通道传递至部署在
TrustZone 安全世界中的 Trusted Application（TA）。在实现上，我们将 TA
host 侧的通信逻辑封装为一个标准化的 C 语言库，并通过 <code>cgo</code>
接口将其嵌入到基于 Go
语言实现的区块链节点模块中，使得主链逻辑可以以统一、透明的方式发起与安全世界的跨域调用。</p>
<p>合约执行完成后，TA
会将执行结果以结构化数据形式返回至普通世界，由链上模块进一步解析并处理相关状态更新。为了确保执行过程的一致性与事务完整性，我们将该模块与
Tendermint
共识机制紧密集成，所有涉及合约状态变更的交易均需经过共识确认后方可生效，从而保证了链上状态的可验证性与确定性。</p>
<h3 id="wasm智能合约执行模块-smart-contract-execution-module">Wasm智能合约执行模块
Smart Contract Execution Module</h3>
<p>为了适应 TrustZone 中受限的执行环境，我们在系统中选用了轻量级的 Wasm
运行时 —— <strong>Wasm Micro Runtime (WAMR)</strong>
作为合约执行引擎。WAMR 具备低内存占用和快速启动的特点，适用于资源受限的
TEE 场景。WAMR 在本系统中的 TrustZone 部署方式借鉴了 WaTZ
【WaTZ】。合约以 AOT 编译后的字节码形式由区块链节点传输至 TEE，并由 WAMR
加载后按用户请求执行相应函数。</p>
<p>在合约执行过程中，往往需要访问或修改链上状态数据。考虑到 TEE
环境无法直接访问链上存储，我们设计了一套基于 <strong>共享内存与扩展 WASI
接口</strong> 的通信机制。具体而言，我们在 REE（普通世界）与 TEE
之间分配了一块共享内存，并将区块链节点进程划分为两个线程：一线程负责通过
<code>TEEC_InvokeCommand</code>
发起合约执行命令，另一线程持续监听共享内存的变化。</p>
<p>当合约需要访问链上数据时，会调用扩展的 WASI
接口，在共享内存中写入特定格式的请求结构。REE
侧监听到共享内存变化后，便从区块链节点的存储中读取或修改目标数据，并将结果写回共享内存供
TEE 使用。具体而言，我们将链上存储的读写逻辑以 Go
语言实现，并将其编译为可由 C 语言调用的函数指针，作为回调函数注入至 TA
host
侧的通信库。该机制支持按上下文与合约地址解析合约实例对应的存储空间，实现了对链上状态的精细化管理。</p>
<p>为了支持隐私计算与链上可信交互，TA 模块内置了一系列安全原语，包括基于
ECDH 的共享密钥派生、AES 对称加解密、以及 ECDSA
数字签名等加密操作接口。在区块链节点部署前，系统会将一个所有节点共享的私钥写入
TA 的安全存储，用于后续的身份认证与密钥交换。该私钥受 TrustZone
隔离保护，无法被外部访问或导出。合约可以通过调用扩展的 WASI
接口访问上述安全原语功能。</p>
<figure>
<img src="/graduation-project/22/image-20250409195400465.png" alt="image-20250409195400465">
<figcaption aria-hidden="true">image-20250409195400465</figcaption>
</figure>
<h2 id="decentralized-identity-system-design">Decentralized Identity
System Design</h2>
<p>本系统基于前述的区块链架构，构建了一个支持零知识属性验证的去中心化身份系统（DID
System）。该系统结合链上智能合约与 TEE
隔离执行能力，支持DID身份注册、可验证凭证（Verifiable Credential,
VC）的颁发与隐私验证。系统中主要参与方包括：用户（User）、凭证发行者（Issuer）、验证者（Verifier）与
DID 智能合约。</p>
<h3 id="did-注册">DID 注册</h3>
<p>在系统中，用户需在本地生成<strong>两对非对称密钥对</strong>：一对用于身份认证中的数字签名，另一对用于与合约之间的密钥交换。所有密钥均基于椭圆曲线
<strong>prime256v1</strong>（即 NIST
P-256）生成，兼具安全性与较好的计算性能，适用于移动端和嵌入式设备
【引用】。</p>
<p>用户将这两对密钥中的公钥提交至链上的 DID
智能合约进行注册。合约在接收到公钥后，会生成一份 <strong>DID
文档</strong>，其中包含用户的签名公钥和密钥交换公钥，并将该文档持久化存储在链上状态中，供后续身份验证和凭证校验使用。注册成功后，合约将返回一个唯一的
DID 标识符（Decentralized
Identifier），用于在系统中标识用户身份，绑定其链上操作与相关凭证。</p>
<h3 id="vc-颁发">VC 颁发</h3>
<p>在 VC
的颁发阶段，凭证发行者（Issuer）通常为具有公信力的权威机构，如政府、学校或金融服务机构。系统默认该发行者已具备对用户真实身份的审核能力，而<strong>发行者获取用户真实身份信息的过程并非本系统关注的范畴</strong>。</p>
<p>发行流程开始时，发行者向用户发送一次性挑战（challenge），用于确认用户对
DID
的所有权。用户使用其本地持有的签名私钥对挑战进行签名，并将签名结果返回。发行者随后从链上读取用户的
DID
文档，提取公钥验证签名的合法性，以此确认请求者与链上注册身份的一致性。</p>
<p>身份确认完成后，发行者根据其掌握的用户信息生成一份
VC，内容可能包括用户的姓名、年龄、住址等身份属性。该 VC
在生成后直接交付给用户本地存储，而<strong>不会上链或公开发布</strong>。</p>
<h3 id="vc-验证">VC 验证</h3>
<p>为保障用户身份凭证的隐私性，同时支持验证方对关键属性的可信校验，本系统设计了一种零知识证明验证方法。该流程使得验证者能够在不知晓
VC 明文内容的前提下，判断用户是否满足某个属性条件（例如“年龄 ≥
18”）。</p>
<p>验证过程包括如下步骤：</p>
<ol type="1">
<li><strong>身份验证</strong>：与 VC
颁发阶段类似，验证者需要利用一次性挑战确认用户对 DID 的所有权。</li>
<li><strong>共享密钥生成与加密
VC</strong>：用户使用自己的密钥交换私钥与链上的公钥（与系统部署时写入
TEE 对应）执行 ECDH
协议，协商出一组对称加密密钥。随后，用户使用该共享密钥对其本地存储的 VC
内容进行 AES 加密，并将密文发送给验证者。</li>
<li><strong>验证请求提交</strong>：验证者将接收到的加密 VC 与用户 DID
一并提交至链上 DID 智能合约模块，发起 VC 验证请求。</li>
<li><strong>TEE
内部解密与校验</strong>：区块链节点接收到请求后，将调用合约执行模块。系统通过TEE中存储的私钥与用户DID文档中的公钥执行
ECDH 协议，重构出一致的共享密钥。随后使用共享密钥解密 VC，并验证 VC
中记录的 DID
与请求用户是否匹配，若一致则进一步判断指定属性（如年龄）是否满足验证条件。</li>
<li><strong>返回验证结果</strong>：TA 将验证结果（通过 /
拒绝）返回给验证者。整个过程中，验证者始终无法获取 VC
的明文内容，也无法从交互中反推出用户的真实身份属性。</li>
</ol>
<p>该流程在无需构建复杂电路或生成加密证明的前提下，实现了零知识性质的属性验证，尤其适用于移动端、IoT
等受限环境下的轻量级隐私计算场景。</p>
<figure>
<img src="/graduation-project/22/image-20250409141626140.png" alt="image-20250409141626140">
<figcaption aria-hidden="true">image-20250409141626140</figcaption>
</figure>
<figure>
<img src="/graduation-project/22/image-20250409141744802.png" alt="image-20250409141744802">
<figcaption aria-hidden="true">image-20250409141744802</figcaption>
</figure>
<p><a href="../../../../../Downloads/时序图.pdf">时序图.pdf</a></p>
<p>本系统构建与 Cosmos 区块链框架之上。为了支持</p>
<p>该系统被分为几个部分：</p>
<ol type="1">
<li>Cosmos区块链节点：负责wasm智能合约原始的aot字节码的保存、智能合约实例化、字节码的查询等。</li>
<li>智能合约执行模块：在区块链节点调用智能合约之后，可以能够向</li>
</ol>
<p>OP-TEE将系统分为
安全世界和普通世界，普通世界里部署节点除了执行智能合约以外的功能，安全世界负责执行智能合约。</p>
<p>智能合约可以通过任意语言编写（C、C++、Rust等）只要可以调用预留给wasm智能合约的外部wasi接口。</p>
<p>要部署一个智能合约：</p>
<ol type="1">
<li>上传编译成 aot 格式的字节码。</li>
<li>实例化字节码，（此时会执行智能合约的实例化initialize函数）得到智能合约的账户地址。</li>
<li>向这个账户地址发起执行或查询请求。</li>
</ol>
<p>调用智能合约时：</p>
<ol type="1">
<li>把aot字节码拷贝到 TEE 中。</li>
<li>TEE 中初始化 Wasm 运行时（WAMR）。</li>
<li>WAMR 执行对应的函数。
<ol type="1">
<li>执行过程中，可能需要获取链上数据。Wasm 通过 wasi ，在 TEE
中的共享内存写入请求。</li>
<li>REE
中始终有一个线程在监听共享内存，发现请求后处理请求。可能是获取状态、修改状态等。</li>
<li>处理完成后，结果写入共享内存。</li>
<li>Wasm 发现共享内存中有得到反馈了，继续执行后续操作。</li>
<li>执行完成，返回结果。</li>
</ol></li>
</ol>
<h2 id="wasm-智能合约">Wasm 智能合约</h2>
<p>通过 wasi 与 OP-TEE OS 中的 API 进行交互，让智能合约可以直接进行
OPTEE
的安全操作（如私钥签名、秘钥交换等），大大降低智能合约开发难度。</p>
<h2 id="did系统-可验证凭证的零知识证明">DID系统 &amp;
可验证凭证的零知识证明</h2>
<p>基于上述系统，就可以实现可验证凭证的零知识证明了。</p>
<ol type="1">
<li>用户在本地创建密钥对，本地保存私钥。</li>
<li>用户将公钥发送给DID合约，创建DID。（链上保存DID文档，DID文档里包含用户的公钥用作身份验证，返回DID）</li>
<li>VC Issuer（发行者，如政府）给用户创建可验证凭证（VC）
<ol type="1">
<li>VC Issuer 提供挑战，用户用私钥签名挑战。</li>
<li>VC Issuer 从链上获取用户的 DID
文档，提取用户公钥，验证签名是否正确，验证用户身份。</li>
<li>验证通过后，VC Issuer 创建 VC
（包含用户的身份数据，如年龄、姓名、住址等）</li>
</ol></li>
<li>用户想要向 Verifier 证明自己的某个身份信息（如年满18岁），但是不想让
Verifier 得知真实年龄和其他身份数据
<ol type="1">
<li>Verifier 提供挑战，用户用私钥签名挑战。</li>
<li>Verifier 从链上获取用户的 DID
文档，提取用户公钥，验证签名是否正确，验证用户身份。</li>
<li>验证通过后，等待用户提供证明。</li>
<li>用户获取链上公钥，与自己的私钥进行 ECDH
共享密钥协商，得到共享密钥。</li>
<li>用户使用共享密钥，通过 AES 对称加密 VC。</li>
<li>用户将加密后的 VC 发送给 Verifier。</li>
<li>（Verifier 无法通过加密 VC 得知用户的任何个人信息。）Verifier
将加密VC发送给DID合约，验证用户年龄是否已满18岁。</li>
<li>DID合约收到加密VC和用户的DID，从链上获取 DID
文档，提取用户公钥，与安全世界内的私钥做 ECDH
共享密钥协商，得到共享密钥。</li>
<li>DID合约用共享密钥解密VC，验证这个VC是否是用户本人的。（查看DID是否一致）</li>
<li>如果是，继续验证VC中的年龄信息是否已满18.</li>
<li>返回验证结果</li>
</ol></li>
</ol>
<h1 id="性能测试">性能测试</h1>
<p>首先环境介绍，Linux22.04，QEMUv8，虚拟机。OP-TEE v4.3.0</p>
<p>为了测试TrustZone对wasm智能合约执行模块的性能影响，设计如下性能测试方案：</p>
<ol type="1">
<li>将 wasm 智能合约模块移动到 ree 中</li>
<li>设计一个不涉及安全原语操作的简单智能合约（counter，仅包含两个功能：修改计数器，获取计数器），因为要在REE中运行智能合约，无法执行安全原语</li>
<li>同时启动多个客户端，连续5分钟不停的向区块链发送查询和交易，统计每次查询和交易执行的时间（lantency），计算吞吐率（query
per second, tx per second）</li>
</ol>
<p>query和tx的情况略有不同。tx在每次出块前统一执行（出块时间约3s），query因为不需要修改链上状态，可以实时获取结果。</p>
<p>我的实验和TZ4Fabric的实验都表明（这里要提及TZ4Fabric吗？），每次实行智能合约中
TEEC_OpenSession 的占据了大量的运行时间 。</p>
<p>于是，我将打开Session的 tee_ctx
的变量全局保存，每执行智能合约直接使用。</p>
<p>实验结果如图：query的吞吐率对比，query的延迟对比，tx的吞吐率对比，tx的延迟对比</p>
<p>吞吐率用折线图，延迟用柱状图。</p>
<p>结果分析：可以发现，query
延迟约提高了两倍，吞吐率变为原来的50%。tx在并发数量较少时，与REE中的数据相比影响较小，吞吐率微微降低，延迟微微提高。但是一个出块时间内能处理的交易数量有限，所以吞吐率有上限。并发量较大时，一些交易会被延迟到几个区块后才被处理，导致平均交易延长。当并发交易数量较多时，观察到吞吐率达到5
tps 后无法再上涨。REE 中的执行速度更快，这个极限的值更大。</p>
<p>想要与 TZ4Fabric 的结果进行对比，来观察 TrustZone
对智能合约执行性能的影响。但是，我的系统与TZ4Fabric使用的区块链不同，智能合约不同，智能合约执行方式也不同，不太好直接对比吞吐率和延迟。但是可以用
吞吐率下降率、延迟提高率
来对比。（这里给出公式，怎么计算吞吐率下降率）</p>
<p>下面列一个表格，列出我的方案和 TZ4Fabric 方案的吞吐率率的对比。</p>
<p>和 TZ4Fabric 对比
性能减少的百分比。4个并发时已经变为了50%，32并发时已经变为了原来的20%。</p>
<p>而我的方案4个并发时性能几乎没有减少，32个方案时才变为50%。</p>
<p>第二部分，给 DID 单独进行</p>
<hr>
<h2 id="实验设置与测试方案">6.1 实验设置与测试方案</h2>
<p>本实验在 Ubuntu 22.04 宿主机上部署基于 QEMU v8.1.2 的 ARMv8
虚拟化环境，TEE 运行环境为 OP-TEE v4.3.0，模拟平台支持 ARM TrustZone
执行模式。QEMU 中配置双核处理器、1GB 内存，启用了 <code>secure=on</code>
模式以支持安全世界的模拟。整个系统包括运行于普通世界（REE）中的区块链节点与运行于安全世界（TEE）中的智能合约执行模块，两者之间通过共享内存进行通信。</p>
<p>实验评估主要包括两个部分：<strong>第一部分评估 TrustZone 对 Wasm
智能合约执行性能的影响</strong>，通过对比合约在 TEE 与 REE
中执行的性能差异，衡量硬件隔离机制带来的性能开销；<strong>第二部分评估
DID 智能合约模块中三个核心功能的执行性能</strong>，即 DID 注册、DID
文档获取 与 VC
验证，进一步验证系统在隐私身份应用场景下的实用性与效率。</p>
<p>在第一部分中，为便于对比，我们将 Wasm 合约运行时分别部署于 TEE 与 REE
中，并使用一个不涉及任何安全原语的轻量级测试合约（计数器合约）作为测试对象。该合约仅包含两个函数：计数器自增与读取当前值，具有良好的计算稳定性和低依赖性。在保证其他系统组件一致的前提下，我们对比分析两种部署模式下的合约调用延迟与吞吐率，反映硬件隔离对执行性能的影响。</p>
<p>在第二部分测试中，我们逐一调用 DID 合约的三个主要功能接口，记录其在
TEE 中的执行延迟，用以评估本系统在零知识式身份校验任务中的处理能力。</p>
<p>所有交易与查询请求均通过 Cosmos SDK 提供的 RPC 接口完成，采用 REST
协议发送 JSON 格式请求。在客户端模拟方面，我们在宿主机上运行基于
JavaScript
编写的测试脚本，模拟多个客户端同时发起请求。实验设置中，客户端并发数从 1
逐步增加至 32，在每组配置下持续运行 5
分钟并记录全过程的交易延迟与吞吐率。合约请求覆盖两类操作：状态查询与状态变更，分别用于测试读取路径与写入路径的性能瓶颈。</p>
<h2 id="section">6.2</h2>
<figure>
<img src="/graduation-project/22/line-smooth-5239037.png" alt="line-smooth">
<figcaption aria-hidden="true">line-smooth</figcaption>
</figure>
<figure>
<img src="/graduation-project/22/line-smooth%20(1)-5239037.png" alt="line-smooth (1)">
<figcaption aria-hidden="true">line-smooth (1)</figcaption>
</figure>
<figure>
<img src="/graduation-project/22/line-smooth%20(2)-5239037.png" alt="line-smooth (2)">
<figcaption aria-hidden="true">line-smooth (2)</figcaption>
</figure>
<figure>
<img src="/graduation-project/22/line-smooth%20(3)-5239037.png" alt="line-smooth (3)">
<figcaption aria-hidden="true">line-smooth (3)</figcaption>
</figure>
<p>在本节中，我们从状态查询（query）和交易提交（tx）两个维度，评估智能合约执行过程中
TrustZone 引入的性能开销。</p>
<p>在 Cosmos SDK
的运行机制中，交易执行（tx）是在每次出块前统一进行，出块时间固定为约 3
秒，因此交易吞吐率受出块频率的物理上限所约束。而状态查询（query）操作并不修改链上状态，允许链节点实时返回结果，具有更强的并发响应能力。因此我们分别测量两类请求在不同并发负载下的吞吐率与平均响应延迟，并分别在
TEE 和 REE 环境下对比结果。</p>
<p>实验过程中发现，无论在 TEE 中执行何种合约逻辑，首次调用均需通过
<code>TEEC_OpenSession</code>
建立安全会话，该操作在每次交易中都造成了明显的性能开销。这一现象与
TZ4Fabric 的实验结论一致，其性能瓶颈亦主要集中于 Trusted Application
会话初始化操作上。为缓解该问题，我们将合约执行过程中所需的
<code>TEEC_Context</code> 与 <code>TEEC_Session</code>
全局缓存，避免每次调用重复建立会话，从而降低了频繁调用带来的额外开销。</p>
<p>图 1 展示了本系统在不同并发数量下的状态查询与交易执行性能表现。图 1
和图 2 分别为查询操作在 TEE 与 REE 下的吞吐率与延迟对比，图 3 和图 4
则展示了交易操作的对比结果。</p>
<p>从实验结果中可以观察到：</p>
<ul>
<li>对于查询操作，TEE 环境下的平均延迟为 REE 的两倍以上，吞吐率约为 REE
的 47%。</li>
<li>对于交易操作，在并发数量较小时，TEE 引入的性能影响较小，吞吐率与 REE
相近，延迟略有上升。但随着并发数增加，交易积压显现，由于每个区块能处理的交易数量有限，部分交易会被延迟至后续区块执行，导致平均交易延迟上升，吞吐率最终稳定在约
5 TPS 左右。相比之下，REE
模式下吞吐率上限更高，能承载更多交易请求。</li>
</ul>
<p>为进一步分析 TrustZone 架构对合约性能的影响，我们尝试与 TZ4Fabric
系统进行对比。但由于两系统在底层区块链平台、合约语言实现、执行模型与硬件平台方面存在显著差异，直接比较原始的吞吐率与延迟数据并不公平。为更合理地反映
TEE 架构引入对系统性能的影响，本文采用以下两个相对性能变化率指标：</p>
<ul>
<li><strong>吞吐率下降率（Throughput Degradation Rate,
TDR）</strong>：</li>
</ul>
<p><span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -1.927ex;" xmlns="http://www.w3.org/2000/svg" width="21.514ex" height="4.988ex" role="img" focusable="false" viewbox="0 -1353 9509.1 2204.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><path data-c="54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"/><path data-c="44" d="M130 622Q123 629 119 631T103 634T60 637H27V683H228Q399 682 419 682T461 676Q504 667 546 641T626 573T685 470T708 336Q708 210 634 116T442 3Q429 1 228 0H27V46H60Q102 47 111 49T130 61V622ZM593 338Q593 439 571 501T493 602Q439 637 355 637H322H294Q238 637 234 628Q231 624 231 344Q231 62 232 59Q233 49 248 48T339 46H350Q456 46 515 95Q561 133 577 191T593 338Z" transform="translate(722,0)"/><path data-c="52" d="M130 622Q123 629 119 631T103 634T60 637H27V683H202H236H300Q376 683 417 677T500 648Q595 600 609 517Q610 512 610 501Q610 468 594 439T556 392T511 361T472 343L456 338Q459 335 467 332Q497 316 516 298T545 254T559 211T568 155T578 94Q588 46 602 31T640 16H645Q660 16 674 32T692 87Q692 98 696 101T712 105T728 103T732 90Q732 59 716 27T672 -16Q656 -22 630 -22Q481 -16 458 90Q456 101 456 163T449 246Q430 304 373 320L363 322L297 323H231V192L232 61Q238 51 249 49T301 46H334V0H323Q302 3 181 3Q59 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM491 499V509Q491 527 490 539T481 570T462 601T424 623T362 636Q360 636 340 636T304 637H283Q238 637 234 628Q231 624 231 492V360H289Q390 360 434 378T489 456Q491 467 491 499Z" transform="translate(1486,0)"/></g><g data-mml-node="mo" transform="translate(2499.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mfrac" transform="translate(3555.6,0)"><g data-mml-node="mrow" transform="translate(220,676)"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="TeXAtom" transform="translate(617,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><path data-c="52" d="M130 622Q123 629 119 631T103 634T60 637H27V683H202H236H300Q376 683 417 677T500 648Q595 600 609 517Q610 512 610 501Q610 468 594 439T556 392T511 361T472 343L456 338Q459 335 467 332Q497 316 516 298T545 254T559 211T568 155T578 94Q588 46 602 31T640 16H645Q660 16 674 32T692 87Q692 98 696 101T712 105T728 103T732 90Q732 59 716 27T672 -16Q656 -22 630 -22Q481 -16 458 90Q456 101 456 163T449 246Q430 304 373 320L363 322L297 323H231V192L232 61Q238 51 249 49T301 46H334V0H323Q302 3 181 3Q59 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM491 499V509Q491 527 490 539T481 570T462 601T424 623T362 636Q360 636 340 636T304 637H283Q238 637 234 628Q231 624 231 492V360H289Q390 360 434 378T489 456Q491 467 491 499Z"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(736,0)"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(1417,0)"/></g></g></g><g data-mml-node="mo" transform="translate(2372.7,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="msub" transform="translate(3373,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="TeXAtom" transform="translate(617,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><path data-c="54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(722,0)"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(1403,0)"/></g></g></g></g><g data-mml-node="msub" transform="translate(1901.5,-686)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="TeXAtom" transform="translate(617,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><path data-c="52" d="M130 622Q123 629 119 631T103 634T60 637H27V683H202H236H300Q376 683 417 677T500 648Q595 600 609 517Q610 512 610 501Q610 468 594 439T556 392T511 361T472 343L456 338Q459 335 467 332Q497 316 516 298T545 254T559 211T568 155T578 94Q588 46 602 31T640 16H645Q660 16 674 32T692 87Q692 98 696 101T712 105T728 103T732 90Q732 59 716 27T672 -16Q656 -22 630 -22Q481 -16 458 90Q456 101 456 163T449 246Q430 304 373 320L363 322L297 323H231V192L232 61Q238 51 249 49T301 46H334V0H323Q302 3 181 3Q59 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM491 499V509Q491 527 490 539T481 570T462 601T424 623T362 636Q360 636 340 636T304 637H283Q238 637 234 628Q231 624 231 492V360H289Q390 360 434 378T489 456Q491 467 491 499Z"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(736,0)"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(1417,0)"/></g></g></g><rect width="5713.6" height="60" x="120" y="220"/></g></g></g></svg></mjx-container></span></p>
<p>其中 <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.375ex;" xmlns="http://www.w3.org/2000/svg" width="4.865ex" height="1.906ex" role="img" focusable="false" viewbox="0 -677 2150.5 842.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="TeXAtom" transform="translate(617,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><path data-c="52" d="M130 622Q123 629 119 631T103 634T60 637H27V683H202H236H300Q376 683 417 677T500 648Q595 600 609 517Q610 512 610 501Q610 468 594 439T556 392T511 361T472 343L456 338Q459 335 467 332Q497 316 516 298T545 254T559 211T568 155T578 94Q588 46 602 31T640 16H645Q660 16 674 32T692 87Q692 98 696 101T712 105T728 103T732 90Q732 59 716 27T672 -16Q656 -22 630 -22Q481 -16 458 90Q456 101 456 163T449 246Q430 304 373 320L363 322L297 323H231V192L232 61Q238 51 249 49T301 46H334V0H323Q302 3 181 3Q59 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM491 499V509Q491 527 490 539T481 570T462 601T424 623T362 636Q360 636 340 636T304 637H283Q238 637 234 628Q231 624 231 492V360H289Q390 360 434 378T489 456Q491 467 491 499Z"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(736,0)"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(1417,0)"/></g></g></g></g></g></svg></mjx-container></span>
表示合约在普通世界（REE）中的吞吐率，<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex;" xmlns="http://www.w3.org/2000/svg" width="4.843ex" height="1.871ex" role="img" focusable="false" viewbox="0 -677 2140.6 827"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="TeXAtom" transform="translate(617,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><path data-c="54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(722,0)"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(1403,0)"/></g></g></g></g></g></svg></mjx-container></span> 表示迁移至 TrustZone
后的吞吐率。TDR 反映因启用 TEE 而引入的性能损耗比例。</p>
<ul>
<li><strong>延迟提高率（Latency Increase Rate, LIR）</strong>：</li>
</ul>
<p><span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -1.927ex;" xmlns="http://www.w3.org/2000/svg" width="20.822ex" height="5.001ex" role="img" focusable="false" viewbox="0 -1359 9203.1 2210.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><path data-c="4C" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q48 680 182 680Q324 680 348 683H360V637H333Q273 637 258 635T233 622L232 342V129Q232 57 237 52Q243 47 313 47Q384 47 410 53Q470 70 498 110T536 221Q536 226 537 238T540 261T542 272T562 273H582V268Q580 265 568 137T554 5V0H25V46H58Q100 47 109 49T128 61V622Z"/><path data-c="49" d="M328 0Q307 3 180 3T32 0H21V46H43Q92 46 106 49T126 60Q128 63 128 342Q128 620 126 623Q122 628 118 630T96 635T43 637H21V683H32Q53 680 180 680T328 683H339V637H317Q268 637 254 634T234 623Q232 620 232 342Q232 63 234 60Q238 55 242 53T264 48T317 46H339V0H328Z" transform="translate(625,0)"/><path data-c="52" d="M130 622Q123 629 119 631T103 634T60 637H27V683H202H236H300Q376 683 417 677T500 648Q595 600 609 517Q610 512 610 501Q610 468 594 439T556 392T511 361T472 343L456 338Q459 335 467 332Q497 316 516 298T545 254T559 211T568 155T578 94Q588 46 602 31T640 16H645Q660 16 674 32T692 87Q692 98 696 101T712 105T728 103T732 90Q732 59 716 27T672 -16Q656 -22 630 -22Q481 -16 458 90Q456 101 456 163T449 246Q430 304 373 320L363 322L297 323H231V192L232 61Q238 51 249 49T301 46H334V0H323Q302 3 181 3Q59 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM491 499V509Q491 527 490 539T481 570T462 601T424 623T362 636Q360 636 340 636T304 637H283Q238 637 234 628Q231 624 231 492V360H289Q390 360 434 378T489 456Q491 467 491 499Z" transform="translate(986,0)"/></g><g data-mml-node="mo" transform="translate(1999.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mfrac" transform="translate(3055.6,0)"><g data-mml-node="mrow" transform="translate(220,676)"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D43F" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="TeXAtom" transform="translate(714,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><path data-c="54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(722,0)"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(1403,0)"/></g></g></g><g data-mml-node="mo" transform="translate(2459.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="msub" transform="translate(3460.1,0)"><g data-mml-node="mi"><path data-c="1D43F" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="TeXAtom" transform="translate(714,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><path data-c="52" d="M130 622Q123 629 119 631T103 634T60 637H27V683H202H236H300Q376 683 417 677T500 648Q595 600 609 517Q610 512 610 501Q610 468 594 439T556 392T511 361T472 343L456 338Q459 335 467 332Q497 316 516 298T545 254T559 211T568 155T578 94Q588 46 602 31T640 16H645Q660 16 674 32T692 87Q692 98 696 101T712 105T728 103T732 90Q732 59 716 27T672 -16Q656 -22 630 -22Q481 -16 458 90Q456 101 456 163T449 246Q430 304 373 320L363 322L297 323H231V192L232 61Q238 51 249 49T301 46H334V0H323Q302 3 181 3Q59 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM491 499V509Q491 527 490 539T481 570T462 601T424 623T362 636Q360 636 340 636T304 637H283Q238 637 234 628Q231 624 231 492V360H289Q390 360 434 378T489 456Q491 467 491 499Z"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(736,0)"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(1417,0)"/></g></g></g></g><g data-mml-node="msub" transform="translate(1950,-686)"><g data-mml-node="mi"><path data-c="1D43F" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="TeXAtom" transform="translate(714,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><path data-c="52" d="M130 622Q123 629 119 631T103 634T60 637H27V683H202H236H300Q376 683 417 677T500 648Q595 600 609 517Q610 512 610 501Q610 468 594 439T556 392T511 361T472 343L456 338Q459 335 467 332Q497 316 516 298T545 254T559 211T568 155T578 94Q588 46 602 31T640 16H645Q660 16 674 32T692 87Q692 98 696 101T712 105T728 103T732 90Q732 59 716 27T672 -16Q656 -22 630 -22Q481 -16 458 90Q456 101 456 163T449 246Q430 304 373 320L363 322L297 323H231V192L232 61Q238 51 249 49T301 46H334V0H323Q302 3 181 3Q59 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM491 499V509Q491 527 490 539T481 570T462 601T424 623T362 636Q360 636 340 636T304 637H283Q238 637 234 628Q231 624 231 492V360H289Q390 360 434 378T489 456Q491 467 491 499Z"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(736,0)"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(1417,0)"/></g></g></g><rect width="5907.6" height="60" x="120" y="220"/></g></g></g></svg></mjx-container></span></p>
<p>其中 <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.375ex;" xmlns="http://www.w3.org/2000/svg" width="5.085ex" height="1.92ex" role="img" focusable="false" viewbox="0 -683 2247.5 848.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D43F" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="TeXAtom" transform="translate(714,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><path data-c="52" d="M130 622Q123 629 119 631T103 634T60 637H27V683H202H236H300Q376 683 417 677T500 648Q595 600 609 517Q610 512 610 501Q610 468 594 439T556 392T511 361T472 343L456 338Q459 335 467 332Q497 316 516 298T545 254T559 211T568 155T578 94Q588 46 602 31T640 16H645Q660 16 674 32T692 87Q692 98 696 101T712 105T728 103T732 90Q732 59 716 27T672 -16Q656 -22 630 -22Q481 -16 458 90Q456 101 456 163T449 246Q430 304 373 320L363 322L297 323H231V192L232 61Q238 51 249 49T301 46H334V0H323Q302 3 181 3Q59 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM491 499V509Q491 527 490 539T481 570T462 601T424 623T362 636Q360 636 340 636T304 637H283Q238 637 234 628Q231 624 231 492V360H289Q390 360 434 378T489 456Q491 467 491 499Z"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(736,0)"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(1417,0)"/></g></g></g></g></g></svg></mjx-container></span> 与 <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex;" xmlns="http://www.w3.org/2000/svg" width="5.062ex" height="1.885ex" role="img" focusable="false" viewbox="0 -683 2237.6 833"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D43F" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="TeXAtom" transform="translate(714,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><path data-c="54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(722,0)"/><path data-c="45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z" transform="translate(1403,0)"/></g></g></g></g></g></svg></mjx-container></span> 分别表示操作在 REE 与 TEE
中执行的平均延迟，LIR 表征延迟因可信执行而增长的相对幅度。</p>
<p>表 1 展示了本系统与 TZ4Fabric 在典型操作下的性能下降率对比：</p>
<p>注：TZ4Fabric 的数据来自其原始论文第X节实验结果（如使用，请加引用
[X]）。</p>
<h2 id="did-稳态性能评估">6.3 DID 稳态性能评估</h2>
<p>为评估本系统中 DID 合约的核心功能在典型使用情境下的执行效率，我们对
<strong>DID 注册（Create DID）</strong>、<strong>DID 文档查询（Query
DID）</strong> 和 <strong>VC 验证（Verify VC）</strong>
三个功能进行了稳态性能测试。每项操作在单线程下连续执行 200
次，并记录平均响应时间，以反映在资源受限环境中，系统对单个用户请求的服务能力。</p>
<h4 id="测试指标">测试指标</h4>
<p>表 1 列出了三项功能在稳态下的平均响应时间：</p>
<hr>
<h4 id="表-1did-合约功能稳态性能指标单线程-200-次">表 1：DID
合约功能稳态性能指标（单线程 × 200 次）</h4>
<table>
<colgroup>
<col style="width: 12%">
<col style="width: 23%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 33%">
</colgroup>
<thead>
<tr>
<th>功能模块</th>
<th>平均响应时间（ms）</th>
<th>最小值（ms）</th>
<th>最大值（ms）</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Create DID</td>
<td>3059.91</td>
<td>3056.13</td>
<td>3100.83</td>
<td>包含签名校验与链上文档存储</td>
</tr>
<tr>
<td>Query DID</td>
<td>216.31</td>
<td>198.79</td>
<td>281.29</td>
<td>纯读取链上状态</td>
</tr>
<tr>
<td>Verify VC</td>
<td>2119.69</td>
<td>1793.26</td>
<td>2318.74</td>
<td>包含 AES 解密与条件判断</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="结果分析">结果分析</h4>
<ul>
<li><strong>Query DID</strong>
的平均响应时间最短（≈216ms），表明系统在处理链上状态读取请求时效率较高，能够满足高频身份信息检索需求。</li>
<li>Create DID 的平均延迟约为 3 秒，与区块链交易处理周期一致。</li>
<li><strong>Verify VC</strong> 响应时间约为 2.1
秒，是当前实现中计算最复杂的路径。尽管延迟相对较高，但仍保持在可接受范围内，能够支持多数实际身份验证场景。</li>
</ul>
<h4 id="结论">结论</h4>
<p>本测试展示了在单线程、无并发干扰条件下，系统核心功能的响应能力，验证了本架构在轻量化
TEE
环境中运行隐私合约的可行性与实用性。特别是在移动终端或边缘计算等部署场景中，DID
查询和 VC
验证均可实现秒级响应，充分体现了系统在保障隐私与安全的同时仍具备良好的服务性能。</p>
<h1 id="conclusion">Conclusion</h1>
<p>本文提出了一种基于 ARM TrustZone 与 WebAssembly
的轻量级智能合约执行架构。通过将合约逻辑与敏感数据处理隔离至安全世界，系统在保障隐私性的同时，兼顾了与现有区块链框架的兼容性。针对可信执行环境与链上存储之间的交互需求，设计了基于共享内存与扩展
WASI 接口的高效通信机制，支持链上合约请求与链下可信执行的协同工作。</p>
<p>在此基础上，本文实现了一个支持加密形式下可验证凭证（VC）校验的去中心化身份（DID）系统，采用
ECDH 密钥交换与 AES
加密机制，实现了无需泄露明文信息的零知识式身份验证，适用于资源受限环境下的隐私保护应用。</p>
<p>实验结果表明，虽然 TrustZone
引入了一定的性能开销，但系统在查询、交易及隐私验证场景下均保持了可接受的延迟与吞吐表现，验证了在受限设备中部署隐私增强型智能合约的可行性。</p>
<p>未来工作将继续优化 REE 与 TEE
之间的通信效率，探索在更严格安全假设下，如何提升TEE环境中隐私保护与攻击防御的能力。进一步，让丰富智能合约的安全原语，使其兼容更复杂的隐私计算任务。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/TrustZone/" rel="tag"><i class="fa fa-tag"></i> TrustZone</a>
              <a href="/tags/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/" rel="tag"><i class="fa fa-tag"></i> 智能合约</a>
              <a href="/tags/%E6%AF%95%E8%AE%BE/" rel="tag"><i class="fa fa-tag"></i> 毕设</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/graduation-project/23/" rel="prev" title="毕设23 - 毕业论文的草稿">
                  <i class="fa fa-angle-left"></i> 毕设23 - 毕业论文的草稿
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/graduation-project/21/" rel="next" title="毕设21 - 性能测试">
                  毕设21 - 性能测试 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2024 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Cishoon</span>
  </div><div class="footer-custom">
Website source code <span class="exturl theme-link" data-url="aHR0cHM6Ly9naXRodWIuY29tL0Npc2hvb24vYmxvZw==">here</span>
</div>


    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL0Npc2hvb24=" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/comments.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/utils.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/motion.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/sidebar.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/next-boot.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/pjax.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/third-party/search/local-search.min.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.0/mermaid.min.js","integrity":"sha256-stuqcu2FrjYCXDOytWFA5SoUE/r3nkp6gTglzNSlavU="}}</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/third-party/tags/mermaid.min.js"></script>

  <script class="next-config" data-name="wavedrom" type="application/json">{"enable":true,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/wavedrom/3.5.0/wavedrom.min.js","integrity":"sha256-INLAoJc6quTNfiMWkGZniYO2cxE8mHpddnLow1m6RFs="}}</script>
  <script class="next-config" data-name="wavedrom_skin" type="application/json">{"enable":true,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/wavedrom/3.5.0/skins/default.js","integrity":"sha256-fduc/Zszk5ezWws2uInY/ALWVmIrmV6VTgXbsYSReFI="}}</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/third-party/tags/wavedrom.min.js"></script>




  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":"true                   ---------------------> 设置为true","tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.20.0/third-party/math/mathjax.min.js"></script>



</body>
</html>
